<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Define custom requests against the `/table` endpoint programatically by providing character vectors with ids of databases, measures and classification fields.
">
<title>Define Custom Tables • STATcubeR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Define Custom Tables">
<meta property="og:description" content="Define custom requests against the `/table` endpoint programatically by providing character vectors with ids of databases, measures and classification fields.
">
<meta property="og:image" content="https://statistikat.github.io/STATcubeR/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">STATcubeR</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.5.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/">Show All Articles ...</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>STATcube REST API</h6>
    <a class="dropdown-item" href="../articles/sc_key.html">All about the API Key</a>
    <a class="dropdown-item" href="../articles/sc_table.html">Get Data via JSON Requests</a>
    <a class="dropdown-item" href="../articles/sc_schema.html">Metadata with the /schema Endpoint</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Open Goventment Data</h6>
    <a class="dropdown-item" href="../articles/od_table.html">Getting Started with OGD Data</a>
    <a class="dropdown-item" href="../articles/od_list.html">Available Datasets</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>The STATcubeR Data Class</h6>
    <a class="dropdown-item" href="../articles/sc_data.html">A Common Class for OGD and API Data</a>
    <a class="dropdown-item" href="../articles/sc_tabulate.html">Tabulation of Data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://data.statistik.gv.at" aria-label="open data portal">
    <span class="fas fa fas fa-table fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.statistik.at/datenbanken/statcube-statistische-datenbank" aria-label="STATcube">
    <span class="fas fa fas fa-cube fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/statistikat/STATcubeR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Define Custom Tables</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/statistikat/STATcubeR/blob/HEAD/vignettes/sc_table_custom.Rmd" class="external-link"><code>vignettes/sc_table_custom.Rmd</code></a></small>
      <div class="d-none name"><code>sc_table_custom.Rmd</code></div>
    </div>

    
    
<script src="https://unpkg.com/@popperjs/core@2"></script><script src="https://unpkg.com/tippy.js@6"></script><link rel="stylesheet" href="https://unpkg.com/tippy.js@6/themes/light.css">
<script>$(document).ready(function () {
    window.setTimeout("tippy('.STATcubeR', {allowHTML: true, theme:'light rounded'});", 50);
    });
    </script><p>The function <code><a href="../reference/sc_table_custom.html">sc_table_custom()</a></code> allows you to define
requests against the <code>/table</code> endpoint programatically. This
can be useful to automate the generation of <code>/table</code> request
rather than relying on the GUI to do so. The function accepts the four
arguments.</p>
<ul>
<li>A <strong>database</strong> id</li>
<li>ids of <strong>measures</strong> to be imported (type
<code>MEASURE</code>, <code>STAT_FUNCTION</code> or
<code>COUNT</code>)</li>
<li>ids of <strong>fields</strong> to be imported (type
<code>FIELD</code> or <code>VALUESET</code>)</li>
<li>a list of <strong>recodes</strong> that can be used customize
fields</li>
</ul>
<div class="section level2">
<h2 id="step-by-step">Bulding a Custom Table Step by Step<a class="anchor" aria-label="anchor" href="#step-by-step"></a>
</h2>
<p>The first part of this Article will showcase how custom tables can be
created with a <a href="https://portal.statistik.at/statistik.at/ext/statcube/openinfopage?id=detouextregsai" class="external-link">database
about tourism</a>. This database will also be used in most other
examples of this article.</p>
<div class="section level3">
<h3 id="database">Starting Simple<a class="anchor" aria-label="anchor" href="#database"></a>
</h3>
<p>First, we want to just send the database id to
<code><a href="../reference/sc_table_custom.html">sc_table_custom()</a></code>. This will request only the mandirory
fields and default measures for that database. In case of the tourism
database, a table with one single row is returned.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">database</span> <span class="op">&lt;-</span> <span class="st">"str:database:detouextregsai"</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table_custom.html">sc_table_custom</a></span><span class="op">(</span><span class="va">database</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">tabulate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A STATcubeR tibble: 1 x 2</span>
  <span style="font-weight: bold;">`Season/Tourism Month`</span> <span style="font-weight: bold;">`Nights spent`</span>
<span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>
<span style="color: #BCBCBC;">1</span> 2022-06-01                   37<span style="text-decoration: underline;">162</span>704</code></pre>
<details><summary>
Show json request
</summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="va">json</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"database"</span><span class="fu">:</span> <span class="st">"str:database:detouextregsai"</span><span class="fu">,</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"measures"</span><span class="fu">:</span> <span class="ot">[]</span><span class="fu">,</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"dimensions"</span><span class="fu">:</span> <span class="ot">[]</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span> </span></code></pre></div>
</details><p>We see that 37 162 704 nights were spent in austrian tourism
establishments in the month of 2022-06-01.</p>
</div>
<div class="section level3">
<h3 id="field">Adding Countries<a class="anchor" aria-label="anchor" href="#field"></a>
</h3>
<p>Now we want to add a classification to the table. This can be done by
getting the database schema and showing all classification fields.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tourism</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_schema.html">sc_schema_db</a></span><span class="op">(</span><span class="va">database</span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_schema.html">sc_schema_flatten</a></span><span class="op">(</span><span class="va">tourism</span>, <span class="st">"FIELD"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A data frame: 4 × 2</span>
  <span style="font-weight: bold;">id</span>                                           <span style="font-weight: bold;">label</span>                     
  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                     
<span style="color: #BCBCBC;">1</span> str:field:detouextregsai:F-DATA1:C-SDB_TIT-0 Season/Tourism Month      
<span style="color: #BCBCBC;">2</span> str:field:detouextregsai:F-DATA:C-GEMREG-0   Tourism commune [ABO]     
<span style="color: #BCBCBC;">3</span> str:field:detouextregsai:F-DATA:C-BBTR_REG-0 Accomodation establishment
<span style="color: #BCBCBC;">4</span> str:field:detouextregsai:F-DATA1:C-C93-2     Country of origin         </code></pre>
<p>If we want to add “Country of origin” we need to include the fouth
entry of the <code>id</code> column in our request.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table_custom.html">sc_table_custom</a></span><span class="op">(</span><span class="va">tourism</span>, dimensions <span class="op">=</span> <span class="va">fields</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">tabulate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A STATcubeR tibble: 3 x 3</span>
  <span style="font-weight: bold;">`Season/Tourism Month`</span> <span style="font-weight: bold;">`Country of origin`</span> <span style="font-weight: bold;">`Nights spent`</span>
<span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>
<span style="color: #BCBCBC;">1</span> 2022-06-01             Austria                   12<span style="text-decoration: underline;">235</span>755
<span style="color: #BCBCBC;">2</span> 2022-06-01             Germany                   14<span style="text-decoration: underline;">343</span>746
<span style="color: #BCBCBC;">3</span> 2022-06-01             other countries           10<span style="text-decoration: underline;">583</span>203</code></pre>
<details><summary>
Show json request
</summary><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="va">json</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">{</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"database"</span><span class="fu">:</span> <span class="st">"str:database:detouextregsai"</span><span class="fu">,</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"measures"</span><span class="fu">:</span> <span class="ot">[]</span><span class="fu">,</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"dimensions"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">"str:field:detouextregsai:F-DATA1:C-C93-2"</span><span class="ot">]</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span> </span></code></pre></div>
</details><p>Alternatively, we could also pass the schema object for “country of
origin”.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">origin</span> <span class="op">&lt;-</span> <span class="va">tourism</span><span class="op">$</span><span class="va">`Other Classifications`</span><span class="op">$</span><span class="va">`Country of origin`</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table_custom.html">sc_table_custom</a></span><span class="op">(</span><span class="va">tourism</span>, dimensions <span class="op">=</span> <span class="va">origin</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="fields">Adding Tourism Communes<a class="anchor" aria-label="anchor" href="#fields"></a>
</h3>
<p>The <code>dimensions</code> parameter in
<code>sc_schema_custom()</code> accepts vectors of field ids. Therefore,
we can add the communes easily.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table_custom.html">sc_table_custom</a></span><span class="op">(</span><span class="va">tourism</span>, dimensions <span class="op">=</span> <span class="va">fields</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">tabulate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A STATcubeR tibble: 321 x 4</span>
   <span style="font-weight: bold;">`Season/Tourism Month`</span> <span style="font-weight: bold;">`Tourism commune [ABO]`</span>        <span style="font-weight: bold;">Country of or…¹</span> <span style="font-weight: bold;">Night…²</span>
 <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>
<span style="color: #BCBCBC;"> 1</span> 2022-06-01             Achensee                       Austria           <span style="text-decoration: underline;">49</span>275
<span style="color: #BCBCBC;"> 2</span> 2022-06-01             Achensee                       Germany          <span style="text-decoration: underline;">371</span>475
<span style="color: #BCBCBC;"> 3</span> 2022-06-01             Achensee                       other countries  <span style="text-decoration: underline;">100</span>131
<span style="color: #BCBCBC;"> 4</span> 2022-06-01             Alpbachtal und Tiroler Seenla… Austria           <span style="text-decoration: underline;">30</span>257
<span style="color: #BCBCBC;"> 5</span> 2022-06-01             Alpbachtal und Tiroler Seenla… Germany          <span style="text-decoration: underline;">147</span>238
<span style="color: #BCBCBC;"> 6</span> 2022-06-01             Alpbachtal und Tiroler Seenla… other countries   <span style="text-decoration: underline;">78</span>072
<span style="color: #BCBCBC;"> 7</span> 2022-06-01             Alpenregion Bludenz            Austria           <span style="text-decoration: underline;">24</span>161
<span style="color: #BCBCBC;"> 8</span> 2022-06-01             Alpenregion Bludenz            Germany          <span style="text-decoration: underline;">124</span>078
<span style="color: #BCBCBC;"> 9</span> 2022-06-01             Alpenregion Bludenz            other countries   <span style="text-decoration: underline;">94</span>838
<span style="color: #BCBCBC;">10</span> 2022-06-01             Arlberg                        Austria           <span style="text-decoration: underline;">11</span>122
<span style="color: #949494;"># … with 311 more rows, and abbreviated variable names ¹​`Country of origin`,</span>
<span style="color: #949494;">#   ²​`Nights spent`</span></code></pre>
<details><summary>
Show json request
</summary><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="va">json</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">{</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"database"</span><span class="fu">:</span> <span class="st">"str:database:detouextregsai"</span><span class="fu">,</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"measures"</span><span class="fu">:</span> <span class="ot">[]</span><span class="fu">,</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"dimensions"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">"str:field:detouextregsai:F-DATA:C-GEMREG-0"</span><span class="ot">],</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">"str:field:detouextregsai:F-DATA1:C-C93-2"</span><span class="ot">]</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span> </span></code></pre></div>
</details>
</div>
<div class="section level3">
<h3 id="measure">Add Another Measure<a class="anchor" aria-label="anchor" href="#measure"></a>
</h3>
<p>Currently, the table only returns the default measure for the
database which is the number of nights spent. We can add a second
measure by again using the database schema and passing a measure id</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">measures</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_schema.html">sc_schema_flatten</a></span><span class="op">(</span><span class="va">tourism</span>, <span class="st">"MEASURE"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A data frame: 2 × 2</span>
  <span style="font-weight: bold;">id</span>                                       <span style="font-weight: bold;">label</span>       
  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       
<span style="color: #BCBCBC;">1</span> str:measure:detouextregsai:F-DATA1:F-ANK Arrivals    
<span style="color: #BCBCBC;">2</span> str:measure:detouextregsai:F-DATA1:F-UEB Nights spent</code></pre>
<p>We can add both measures to the request by using
<code>measures$id</code>. Just like the <code>dimensions</code>
parameter, the <code>measures</code> parameters accepts vectors of
resource ids.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table_custom.html">sc_table_custom</a></span><span class="op">(</span><span class="va">tourism</span>, measures <span class="op">=</span> <span class="va">measures</span><span class="op">$</span><span class="va">id</span>,</span>
<span>                     dimensions <span class="op">=</span> <span class="va">fields</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">tabulate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A STATcubeR tibble: 321 x 5</span>
   <span style="font-weight: bold;">Season/Touri…¹</span> <span style="font-weight: bold;">`Tourism commune [ABO]`</span>        <span style="font-weight: bold;">Country of or…²</span> <span style="font-weight: bold;">Arriv…³</span> <span style="font-weight: bold;">Night…⁴</span>
 <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>
<span style="color: #BCBCBC;"> 1</span> 2022-06-01     Achensee                       Austria           <span style="text-decoration: underline;">16</span>835   <span style="text-decoration: underline;">49</span>275
<span style="color: #BCBCBC;"> 2</span> 2022-06-01     Achensee                       Germany          <span style="text-decoration: underline;">100</span>856  <span style="text-decoration: underline;">371</span>475
<span style="color: #BCBCBC;"> 3</span> 2022-06-01     Achensee                       other countries   <span style="text-decoration: underline;">27</span>409  <span style="text-decoration: underline;">100</span>131
<span style="color: #BCBCBC;"> 4</span> 2022-06-01     Alpbachtal und Tiroler Seenla… Austria           <span style="text-decoration: underline;">10</span>846   <span style="text-decoration: underline;">30</span>257
<span style="color: #BCBCBC;"> 5</span> 2022-06-01     Alpbachtal und Tiroler Seenla… Germany           <span style="text-decoration: underline;">35</span>436  <span style="text-decoration: underline;">147</span>238
<span style="color: #BCBCBC;"> 6</span> 2022-06-01     Alpbachtal und Tiroler Seenla… other countries   <span style="text-decoration: underline;">18</span>959   <span style="text-decoration: underline;">78</span>072
<span style="color: #BCBCBC;"> 7</span> 2022-06-01     Alpenregion Bludenz            Austria           <span style="text-decoration: underline;">10</span>462   <span style="text-decoration: underline;">24</span>161
<span style="color: #BCBCBC;"> 8</span> 2022-06-01     Alpenregion Bludenz            Germany           <span style="text-decoration: underline;">36</span>567  <span style="text-decoration: underline;">124</span>078
<span style="color: #BCBCBC;"> 9</span> 2022-06-01     Alpenregion Bludenz            other countries   <span style="text-decoration: underline;">24</span>898   <span style="text-decoration: underline;">94</span>838
<span style="color: #BCBCBC;">10</span> 2022-06-01     Arlberg                        Austria            <span style="text-decoration: underline;">4</span>593   <span style="text-decoration: underline;">11</span>122
<span style="color: #949494;"># … with 311 more rows, and abbreviated variable names ¹​`Season/Tourism Month`,</span>
<span style="color: #949494;">#   ²​`Country of origin`, ³​Arrivals, ⁴​`Nights spent`</span></code></pre>
<details><summary>
Show json request
</summary><div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="va">json</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">{</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"database"</span><span class="fu">:</span> <span class="st">"str:database:detouextregsai"</span><span class="fu">,</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"measures"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"str:measure:detouextregsai:F-DATA1:F-ANK"</span><span class="ot">,</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"str:measure:detouextregsai:F-DATA1:F-UEB"</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"dimensions"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">"str:field:detouextregsai:F-DATA:C-GEMREG-0"</span><span class="ot">],</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">"str:field:detouextregsai:F-DATA1:C-C93-2"</span><span class="ot">]</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span> </span></code></pre></div>
</details>
</div>
<div class="section level3">
<h3 id="hierarchy">Changing the hierarchy level<a class="anchor" aria-label="anchor" href="#hierarchy"></a>
</h3>
<p>We can see in <a href="https://portal.statistik.at/statistik.at/ext/statcube/openinfopage?id=detouextregsai" class="external-link">the
GUI</a> that “Country of origin” is a hierarchical classification. If we
look at the table above, only the top level of the hierarchy (Austria,
Germany, other) is used. This can be changed by providing the the
valueset that corresponds to the more granular classification of
“country of origin”</p>
<p><img src="img/hierarchical_classification.png" width="50%" style="display: block; margin: auto;"></p>
<p>The different valuesets for “country of origin” can be compared by
browsing the database schema.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">valuesets</span> <span class="op">&lt;-</span> <span class="va">tourism</span><span class="op">$</span><span class="va">`Other Classifications`</span><span class="op">$</span><span class="va">`Country of origin`</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #00BBBB;">FIELD</span>: <span style="font-weight: bold;">Country of origin</span>
<span style="color: #BCBCBC;">1</span> Country of origin        <span style="color: #87AFAF;">VALUESET</span>    87
<span style="color: #BCBCBC;">2</span> Herkunftsland (Ebene +1) <span style="color: #87AFAF;">VALUESET</span>     3</code></pre>
<p>We can see that the two levels of the hierarchy are represented by
the two valuesets. The valueset “Herkunftsland” uses 3 classification
elements and represents the top level of the hierarchy (Austria,
Germany, Other). The valueset “Country of origin” uses 87 (10+8+69)
classification elements and is the bottom level of the hierarchy. For
classifications with more levels of hierarchies, more valuesets will be
present.</p>
<p>We will now use the id for the first valueset in the
<code>dimensions</code> parmaeter of <code>sc_table_custom</code>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table_custom.html">sc_table_custom</a></span><span class="op">(</span></span>
<span>  db <span class="op">=</span> <span class="va">tourism</span>,</span>
<span>  measures <span class="op">=</span> <span class="va">measures</span><span class="op">$</span><span class="va">id</span>,</span>
<span>  dimensions <span class="op">=</span> <span class="va">valuesets</span><span class="op">$</span><span class="va">`Country of origin`</span></span>
<span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">tabulate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A STATcubeR tibble: 87 x 4</span>
   <span style="font-weight: bold;">`Season/Tourism Month`</span> <span style="font-weight: bold;">`Country of origin`</span>                    <span style="font-weight: bold;">Arriv…¹</span> <span style="font-weight: bold;">Night…²</span>
 <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>
<span style="color: #BCBCBC;"> 1</span> 2022-06-01             Vienna &lt;01&gt;                             <span style="text-decoration: underline;">886</span>417 2<span style="text-decoration: underline;">644</span>207
<span style="color: #BCBCBC;"> 2</span> 2022-06-01             Burgenland (beg.05/03) &lt;70&gt;             <span style="text-decoration: underline;">208</span>706  <span style="text-decoration: underline;">537</span>523
<span style="color: #BCBCBC;"> 3</span> 2022-06-01             Carinthia (beg.05/03) &lt;71&gt;              <span style="text-decoration: underline;">231</span>186  <span style="text-decoration: underline;">697</span>365
<span style="color: #BCBCBC;"> 4</span> 2022-06-01             Lower Austria (beg.05/03) &lt;72&gt;          <span style="text-decoration: underline;">827</span>314 2<span style="text-decoration: underline;">483</span>974
<span style="color: #BCBCBC;"> 5</span> 2022-06-01             Upper Austria (beg.05/03) &lt;73&gt;          <span style="text-decoration: underline;">747</span>303 1<span style="text-decoration: underline;">997</span>340
<span style="color: #BCBCBC;"> 6</span> 2022-06-01             Salzburg (beg.05/03) &lt;74&gt;               <span style="text-decoration: underline;">307</span>547  <span style="text-decoration: underline;">808</span>860
<span style="color: #BCBCBC;"> 7</span> 2022-06-01             Styria (beg.05/03) &lt;75&gt;                 <span style="text-decoration: underline;">622</span>698 1<span style="text-decoration: underline;">793</span>778
<span style="color: #BCBCBC;"> 8</span> 2022-06-01             Tyrol (beg.05/03) &lt;76&gt;                  <span style="text-decoration: underline;">314</span>377  <span style="text-decoration: underline;">828</span>831
<span style="color: #BCBCBC;"> 9</span> 2022-06-01             Vorarlberg (beg.05/03) &lt;77&gt;             <span style="text-decoration: underline;">168</span>320  <span style="text-decoration: underline;">443</span>877
<span style="color: #BCBCBC;">10</span> 2022-06-01             Austria except Vienna (till 04/03) &lt;0…       0       0
<span style="color: #949494;"># … with 77 more rows, and abbreviated variable names ¹​Arrivals,</span>
<span style="color: #949494;">#   ²​`Nights spent`</span></code></pre>
<details><summary>
Show json request
</summary><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="va">json</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">{</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"database"</span><span class="fu">:</span> <span class="st">"str:database:detouextregsai"</span><span class="fu">,</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"measures"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"str:measure:detouextregsai:F-DATA1:F-ANK"</span><span class="ot">,</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"str:measure:detouextregsai:F-DATA1:F-UEB"</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"dimensions"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">"str:valueset:detouextregsai:F-DATA1:C-C93-2:C-C93-2"</span><span class="ot">]</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span> </span></code></pre></div>
</details><p>It is possible to use a mixture of valuesets and fields in the
<code>dimensions</code> parameter.</p>
</div>
</div>
<div class="section level2">
<h2 id="counts">Using Counts<a class="anchor" aria-label="anchor" href="#counts"></a>
</h2>
<p>Instead of Measures and Valuesets, it is also possible to provide
counts in the <code>measure</code> parameter of
<code><a href="../reference/sc_table_custom.html">sc_table_custom()</a></code>.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">population</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_schema.html">sc_schema_db</a></span><span class="op">(</span><span class="st">"debevstand"</span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">count</span> <span class="op">&lt;-</span> <span class="va">population</span><span class="op">$</span><span class="va">`Datensätze/Records`</span><span class="op">$</span><span class="va">`F-BEVSTAND`</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span><span class="va">COUNT</span><span class="op">:</span> <span class="cn">F</span><span class="op">-</span><span class="va">BEVSTAND</span></span></code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table_custom.html">sc_table_custom</a></span><span class="op">(</span><span class="va">population</span>, <span class="va">count</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">tabulate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A STATcubeR tibble: 1 x 2</span>
  <span style="font-weight: bold;">Quarter</span>    <span style="font-weight: bold;">`F-BEVSTAND`</span>
<span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>
<span style="color: #BCBCBC;">1</span> 2022-01-01       <span style="text-decoration: underline;">389</span>026</code></pre>
<details><summary>
Show json request
</summary><div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="va">json</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">{</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"database"</span><span class="fu">:</span> <span class="st">"str:database:debevstand"</span><span class="fu">,</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"measures"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"str:count:debevstand:F-BEVSTAND"</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"dimensions"</span><span class="fu">:</span> <span class="ot">[]</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span> </span></code></pre></div>
</details>
</div>
<div class="section level2">
<h2 id="recodes">Recodes<a class="anchor" aria-label="anchor" href="#recodes"></a>
</h2>
<p>Data can be filtered on the server side by using the
<code>recodes</code> parameter of <code><a href="../reference/sc_table_custom.html">sc_table_custom()</a></code>. This
might be more complicated than filtering the data in R but offers some
important advantages.</p>
<ul>
<li>
<strong>performance</strong> Traffic between the client and server
is reduced which might lead to consierably faster API responses.</li>
<li>
<strong>cell limits (user)</strong> Apart from rate limits (see
<code><a href="../reference/other_endpoints.html">?sc_rate_limits</a></code>), STATcube also limits the amount of cells
that can be fetched per user. Filtering data can be useful to preserve
this quota.</li>
<li>
<strong>cell limits (equest)</strong> If a single request would
contain more than 1 million cells, a <a href="sc_last_error.html#CELL_COUNT">cell count error</a> is
thrown.</li>
</ul>
<div class="section level3">
<h3 id="filter">Filtering Data<a class="anchor" aria-label="anchor" href="#filter"></a>
</h3>
<p>As an example for fiitering data, we can request a table from the
tourism database and only select some countries for
<code>Country of origin</code>.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">origin</span> <span class="op">&lt;-</span> <span class="va">tourism</span><span class="op">$</span><span class="va">`Other Classifications`</span><span class="op">$</span><span class="va">`Country of origin`</span><span class="op">$</span><span class="va">`Country of origin`</span></span>
<span><span class="va">month</span> <span class="op">&lt;-</span> <span class="va">tourism</span><span class="op">$</span><span class="va">`Mandatory fields`</span><span class="op">$</span><span class="va">`Season/Tourism Month`</span><span class="op">$</span><span class="va">`Season/Tourism Month`</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table_custom.html">sc_table_custom</a></span><span class="op">(</span></span>
<span>  db <span class="op">=</span> <span class="va">tourism</span>,</span>
<span>  measures <span class="op">=</span> <span class="va">measures</span><span class="op">$</span><span class="va">id</span>,</span>
<span>  dimensions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">month</span>, <span class="va">origin</span><span class="op">)</span>,</span>
<span>  recodes <span class="op">=</span> <span class="fu"><a href="../reference/sc_table_custom.html">sc_recode</a></span><span class="op">(</span><span class="va">origin</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">origin</span><span class="op">$</span><span class="va">`Italy &lt;29&gt;`</span>, <span class="va">origin</span><span class="op">$</span><span class="va">`Germany &lt;12&gt;`</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">tabulate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A STATcubeR tibble: 552 x 4</span>
   <span style="font-weight: bold;">`Season/Tourism Month`</span> <span style="font-weight: bold;">`Country of origin`</span> <span style="font-weight: bold;">Arrivals</span> <span style="font-weight: bold;">`Nights spent`</span>
   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>
<span style="color: #BCBCBC;"> 1</span> 1999-11-01             Italy &lt;29&gt;             <span style="text-decoration: underline;">34</span>612          <span style="text-decoration: underline;">71</span>854
<span style="color: #BCBCBC;"> 2</span> 1999-11-01             Germany &lt;12&gt;          <span style="text-decoration: underline;">261</span>213         <span style="text-decoration: underline;">762</span>568
<span style="color: #BCBCBC;"> 3</span> 1999-12-01             Italy &lt;29&gt;             <span style="text-decoration: underline;">88</span>337         <span style="text-decoration: underline;">218</span>213
<span style="color: #BCBCBC;"> 4</span> 1999-12-01             Germany &lt;12&gt;          <span style="text-decoration: underline;">849</span>720        4<span style="text-decoration: underline;">152</span>811
<span style="color: #BCBCBC;"> 5</span> 2000-01-01             Italy &lt;29&gt;             <span style="text-decoration: underline;">53</span>289         <span style="text-decoration: underline;">204</span>169
<span style="color: #BCBCBC;"> 6</span> 2000-01-01             Germany &lt;12&gt;         1<span style="text-decoration: underline;">221</span>916        6<span style="text-decoration: underline;">972</span>223
<span style="color: #BCBCBC;"> 7</span> 2000-02-01             Italy &lt;29&gt;             <span style="text-decoration: underline;">32</span>509          <span style="text-decoration: underline;">98</span>706
<span style="color: #BCBCBC;"> 8</span> 2000-02-01             Germany &lt;12&gt;          <span style="text-decoration: underline;">966</span>214        5<span style="text-decoration: underline;">651</span>428
<span style="color: #BCBCBC;"> 9</span> 2000-03-01             Italy &lt;29&gt;             <span style="text-decoration: underline;">56</span>189         <span style="text-decoration: underline;">135</span>877
<span style="color: #BCBCBC;">10</span> 2000-03-01             Germany &lt;12&gt;         1<span style="text-decoration: underline;">009</span>715        5<span style="text-decoration: underline;">483</span>191
<span style="color: #949494;"># … with 542 more rows</span></code></pre>
<details><summary>
Show json request
</summary><div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="va">json</span></span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">{</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"database"</span><span class="fu">:</span> <span class="st">"str:database:detouextregsai"</span><span class="fu">,</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"measures"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"str:measure:detouextregsai:F-DATA1:F-ANK"</span><span class="ot">,</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"str:measure:detouextregsai:F-DATA1:F-UEB"</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"dimensions"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">"str:valueset:detouextregsai:F-DATA1:C-SDB_TIT-0:C-SDB_TIT-0"</span><span class="ot">],</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">"str:valueset:detouextregsai:F-DATA1:C-C93-2:C-C93-2"</span><span class="ot">]</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"recodes"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"str:valueset:detouextregsai:F-DATA1:C-C93-2:C-C93-2"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"map"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>        <span class="ot">[</span><span class="st">"str:value:detouextregsai:F-DATA1:C-C93-2:C-C93-2:20"</span><span class="ot">],</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>        <span class="ot">[</span><span class="st">"str:value:detouextregsai:F-DATA1:C-C93-2:C-C93-2:12"</span><span class="ot">]</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"total"</span><span class="fu">:</span> <span class="kw">false</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span> </span></code></pre></div>
</details><p>This table only contains two countries rather than 87 so the amount
of cells in the table is also 40 times less compared to a table that
would omit this filter.</p>
</div>
<div class="section level3">
<h3 id="group">Grouping items<a class="anchor" aria-label="anchor" href="#group"></a>
</h3>
<p>Other options from the <a href="https://docs.wingarc.com.au/superstar/9.12/open-data-api/open-data-api-reference/table-endpoint" class="external-link">recodes
specification</a> are also available via <code><a href="../reference/sc_table_custom.html">sc_recode()</a></code>. It is
possible to group items and specify recodes for several
classifications.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table_custom.html">sc_table_custom</a></span><span class="op">(</span></span>
<span>  db <span class="op">=</span> <span class="va">tourism</span>,</span>
<span>  measures <span class="op">=</span> <span class="va">measures</span><span class="op">$</span><span class="va">id</span>,</span>
<span>  dimensions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">month</span>, <span class="va">origin</span><span class="op">)</span>,</span>
<span>  recodes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/sc_table_custom.html">sc_recode</a></span><span class="op">(</span><span class="va">origin</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">origin</span><span class="op">$</span><span class="va">`Germany &lt;12&gt;`</span>, <span class="va">origin</span><span class="op">$</span><span class="va">`Netherlands &lt;25&gt;`</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">origin</span><span class="op">$</span><span class="va">`Italy &lt;29&gt;`</span>, <span class="va">origin</span><span class="op">$</span><span class="va">`France (incl.Monaco) &lt;14&gt;`</span><span class="op">)</span></span>
<span>    <span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/sc_table_custom.html">sc_recode</a></span><span class="op">(</span><span class="va">month</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="va">month</span><span class="op">$</span><span class="va">Nov.99</span>, <span class="va">month</span><span class="op">$</span><span class="va">Feb.00</span>, <span class="va">month</span><span class="op">$</span><span class="va">Apr.09</span>, <span class="va">month</span><span class="op">$</span><span class="va">`Jan. 22`</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">tabulate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A STATcubeR tibble: 8 x 4</span>
  <span style="font-weight: bold;">`Season/Tourism Month`</span> <span style="font-weight: bold;">`Country of origin`</span>                  <span style="font-weight: bold;">Arrivals</span> <span style="font-weight: bold;">Nights …¹</span>
  <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>
<span style="color: #BCBCBC;">1</span> 1999-11-01             Germany &lt;12&gt;;Netherlands &lt;25&gt;          <span style="text-decoration: underline;">272</span>496    <span style="text-decoration: underline;">795</span>183
<span style="color: #BCBCBC;">2</span> 1999-11-01             Italy &lt;29&gt;;France (incl.Monaco) &lt;14&gt;    <span style="text-decoration: underline;">47</span>580    <span style="text-decoration: underline;">105</span>150
<span style="color: #BCBCBC;">3</span> 2000-02-01             Germany &lt;12&gt;;Netherlands &lt;25&gt;         1<span style="text-decoration: underline;">237</span>039   7<span style="text-decoration: underline;">208</span>626
<span style="color: #BCBCBC;">4</span> 2000-02-01             Italy &lt;29&gt;;France (incl.Monaco) &lt;14&gt;    <span style="text-decoration: underline;">77</span>162    <span style="text-decoration: underline;">350</span>655
<span style="color: #BCBCBC;">5</span> 2009-04-01             Germany &lt;12&gt;;Netherlands &lt;25&gt;           <span style="text-decoration: underline;">44</span>545    <span style="text-decoration: underline;">174</span>388
<span style="color: #BCBCBC;">6</span> 2009-04-01             Italy &lt;29&gt;;France (incl.Monaco) &lt;14&gt;    <span style="text-decoration: underline;">97</span>913    <span style="text-decoration: underline;">219</span>553
<span style="color: #BCBCBC;">7</span> 2022-01-01             Germany &lt;12&gt;;Netherlands &lt;25&gt;          <span style="text-decoration: underline;">154</span>121    <span style="text-decoration: underline;">886</span>490
<span style="color: #BCBCBC;">8</span> 2022-01-01             Italy &lt;29&gt;;France (incl.Monaco) &lt;14&gt;    <span style="text-decoration: underline;">28</span>301    <span style="text-decoration: underline;">100</span>484
<span style="color: #949494;"># … with abbreviated variable name ¹​`Nights spent`</span></code></pre>
<details><summary>
Show json request
</summary><div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="va">json</span></span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">{</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"database"</span><span class="fu">:</span> <span class="st">"str:database:detouextregsai"</span><span class="fu">,</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"measures"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"str:measure:detouextregsai:F-DATA1:F-ANK"</span><span class="ot">,</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"str:measure:detouextregsai:F-DATA1:F-UEB"</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"dimensions"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">"str:valueset:detouextregsai:F-DATA1:C-SDB_TIT-0:C-SDB_TIT-0"</span><span class="ot">],</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">"str:valueset:detouextregsai:F-DATA1:C-C93-2:C-C93-2"</span><span class="ot">]</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"recodes"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"str:valueset:detouextregsai:F-DATA1:C-C93-2:C-C93-2"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"map"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>        <span class="ot">[</span><span class="st">"str:value:detouextregsai:F-DATA1:C-C93-2:C-C93-2:12"</span><span class="ot">,</span> <span class="st">"str:value:detouextregsai:F-DATA1:C-C93-2:C-C93-2:25"</span><span class="ot">],</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>        <span class="ot">[</span><span class="st">"str:value:detouextregsai:F-DATA1:C-C93-2:C-C93-2:20"</span><span class="ot">,</span> <span class="st">"str:value:detouextregsai:F-DATA1:C-C93-2:C-C93-2:14"</span><span class="ot">]</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"total"</span><span class="fu">:</span> <span class="kw">false</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"str:valueset:detouextregsai:F-DATA1:C-SDB_TIT-0:C-SDB_TIT-0"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"map"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>        <span class="ot">[</span><span class="st">"str:value:detouextregsai:F-DATA1:C-SDB_TIT-0:C-SDB_TIT-0:199911"</span><span class="ot">],</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>        <span class="ot">[</span><span class="st">"str:value:detouextregsai:F-DATA1:C-SDB_TIT-0:C-SDB_TIT-0:200002"</span><span class="ot">],</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>        <span class="ot">[</span><span class="st">"str:value:detouextregsai:F-DATA1:C-SDB_TIT-0:C-SDB_TIT-0:200904"</span><span class="ot">],</span></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>        <span class="ot">[</span><span class="st">"str:value:detouextregsai:F-DATA1:C-SDB_TIT-0:C-SDB_TIT-0:202201"</span><span class="ot">]</span></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"total"</span><span class="fu">:</span> <span class="kw">false</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span> </span></code></pre></div>
</details><p>This table contains data for two country-groups and two months. In
this case, the cell values for Gemany and the Netherlands are just added
to calculate the etries for Arrivals and Nights spent. However, in other
cases STATcubeR might decide it is more appropriate to use weighted
means or other more complicated aggregation methods.</p>
</div>
<div class="section level3">
<h3 id="totals">Adding Totals<a class="anchor" aria-label="anchor" href="#totals"></a>
</h3>
<p>The <code>total</code> parameter in <code><a href="../reference/sc_table_custom.html">sc_recode()</a></code> can be
used to request totals for classifications. As an example, let’s look at
the tourism acivity in the capital cities of austria</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">destination</span> <span class="op">&lt;-</span> <span class="va">tourism</span><span class="op">$</span><span class="va">`Other Classifications`</span><span class="op">$</span><span class="va">`Tourism commune [ABO]`</span><span class="op">$</span></span>
<span>  <span class="va">`Regionale Gliederung (Ebene +1)`</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table_custom.html">sc_table_custom</a></span><span class="op">(</span></span>
<span>    <span class="va">tourism</span>,</span>
<span>    measures <span class="op">=</span> <span class="va">measures</span><span class="op">$</span><span class="va">id</span>,</span>
<span>    dimensions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">month</span>, <span class="va">destination</span><span class="op">)</span>,</span>
<span>    recodes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="../reference/sc_table_custom.html">sc_recode</a></span><span class="op">(</span><span class="va">destination</span>, total <span class="op">=</span> <span class="cn">TRUE</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="va">destination</span><span class="op">$</span><span class="va">Wien</span>, <span class="va">destination</span><span class="op">$</span><span class="va">`Stadt Salzburg`</span>, <span class="va">destination</span><span class="op">$</span><span class="va">Linz</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="../reference/sc_table_custom.html">sc_recode</a></span><span class="op">(</span><span class="va">month</span>, total <span class="op">=</span> <span class="cn">FALSE</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">month</span><span class="op">$</span><span class="va">Nov.99</span>, <span class="va">month</span><span class="op">$</span><span class="va">Apr.09</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A STATcubeR tibble: 8 x 4</span>
  <span style="font-weight: bold;">`Season/Tourism Month`</span> <span style="font-weight: bold;">`Tourism commune [ABO]`</span> <span style="font-weight: bold;">Arrivals</span> <span style="font-weight: bold;">`Nights spent`</span>
  <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>
<span style="color: #BCBCBC;">1</span> 1999-11-01             Wien                      <span style="text-decoration: underline;">234</span>186         <span style="text-decoration: underline;">522</span>306
<span style="color: #BCBCBC;">2</span> 1999-11-01             Stadt Salzburg             <span style="text-decoration: underline;">49</span>369          <span style="text-decoration: underline;">89</span>637
<span style="color: #BCBCBC;">3</span> 1999-11-01             Linz                       <span style="text-decoration: underline;">25</span>562          <span style="text-decoration: underline;">43</span>789
<span style="color: #BCBCBC;">4</span> 1999-11-01             Total                     <span style="text-decoration: underline;">309</span>117         <span style="text-decoration: underline;">655</span>732
<span style="color: #BCBCBC;">5</span> 2009-04-01             Wien                      <span style="text-decoration: underline;">356</span>723         <span style="text-decoration: underline;">806</span>201
<span style="color: #BCBCBC;">6</span> 2009-04-01             Stadt Salzburg             <span style="text-decoration: underline;">84</span>582         <span style="text-decoration: underline;">151</span>483
<span style="color: #BCBCBC;">7</span> 2009-04-01             Linz                       <span style="text-decoration: underline;">35</span>594          <span style="text-decoration: underline;">65</span>001
<span style="color: #BCBCBC;">8</span> 2009-04-01             Total                     <span style="text-decoration: underline;">476</span>899        1<span style="text-decoration: underline;">022</span>685</code></pre>
<details><summary>
Show json request
</summary><div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="va">json</span></span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">{</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"database"</span><span class="fu">:</span> <span class="st">"str:database:detouextregsai"</span><span class="fu">,</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"measures"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"str:measure:detouextregsai:F-DATA1:F-ANK"</span><span class="ot">,</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"str:measure:detouextregsai:F-DATA1:F-UEB"</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"dimensions"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">"str:valueset:detouextregsai:F-DATA1:C-SDB_TIT-0:C-SDB_TIT-0"</span><span class="ot">],</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">"str:valueset:detouextregsai:F-DATA:C-GEMREG-0:C-TOUREG-0"</span><span class="ot">]</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"recodes"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"str:valueset:detouextregsai:F-DATA:C-GEMREG-0:C-TOUREG-0"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"map"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>        <span class="ot">[</span><span class="st">"str:value:detouextregsai:F-DATA:C-GEMREG-0:C-TOUREG-0:TOUREG-Wien"</span><span class="ot">],</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>        <span class="ot">[</span><span class="st">"str:value:detouextregsai:F-DATA:C-GEMREG-0:C-TOUREG-0:TOUREG-Stadt"</span><span class="ot">],</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>        <span class="ot">[</span><span class="st">"str:value:detouextregsai:F-DATA:C-GEMREG-0:C-TOUREG-0:TOUREG-Linz"</span><span class="ot">]</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"total"</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"str:valueset:detouextregsai:F-DATA1:C-SDB_TIT-0:C-SDB_TIT-0"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"map"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>        <span class="ot">[</span><span class="st">"str:value:detouextregsai:F-DATA1:C-SDB_TIT-0:C-SDB_TIT-0:199911"</span><span class="ot">],</span></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>        <span class="ot">[</span><span class="st">"str:value:detouextregsai:F-DATA1:C-SDB_TIT-0:C-SDB_TIT-0:200904"</span><span class="ot">]</span></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"total"</span><span class="fu">:</span> <span class="kw">false</span></span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span> </span></code></pre></div>
</details><p>We see that there are two rows in the table where Tourism commune is
set to “Total”. The corresponding values represent the sum of all
Arrivals or Nights spent in either of these three cities durng that
month.</p>
</div>
<div class="section level3">
<h3 id="recode-hierarchy">Recoding across hierarchies<a class="anchor" aria-label="anchor" href="#recode-hierarchy"></a>
</h3>
<p>To use a recode that includes several hierarchy levels, the
corresponding <code>FIELD</code> should be used as the first parameter
of <code><a href="../reference/sc_table_custom.html">sc_recode()</a></code>. For example, a recode with countries and
federal states from the “Country of origin” classification can be
defined as follows.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">origin1</span> <span class="op">&lt;-</span> <span class="va">tourism</span><span class="op">$</span><span class="va">`Other Classifications`</span><span class="op">$</span><span class="va">`Country of origin`</span></span>
<span><span class="va">origin2</span> <span class="op">&lt;-</span> <span class="va">origin1</span><span class="op">$</span><span class="va">`Country of origin`</span></span>
<span><span class="va">origin3</span> <span class="op">&lt;-</span> <span class="va">origin1</span><span class="op">$</span><span class="va">`Herkunftsland (Ebene +1)`</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table_custom.html">sc_table_custom</a></span><span class="op">(</span></span>
<span>  <span class="va">tourism</span>, <span class="va">measures</span><span class="op">$</span><span class="va">id</span>, <span class="va">origin1</span>,</span>
<span>  recodes <span class="op">=</span> <span class="fu"><a href="../reference/sc_table_custom.html">sc_recode</a></span><span class="op">(</span><span class="va">origin1</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="va">origin2</span><span class="op">$</span><span class="va">`Vienna &lt;01&gt;`</span>, <span class="va">origin3</span><span class="op">$</span><span class="va">Germany</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">origin2</span><span class="op">$</span><span class="va">`Bavaria (beg.05/03) &lt;80&gt;`</span>, <span class="va">origin3</span><span class="op">$</span><span class="va">`other countries`</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">tabulate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A STATcubeR tibble: 3 x 4</span>
  <span style="font-weight: bold;">`Season/Tourism Month`</span> <span style="font-weight: bold;">`Country of origin`</span>                     <span style="font-weight: bold;">Arriv…¹</span> <span style="font-weight: bold;">Night…²</span>
<span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>
<span style="color: #BCBCBC;">1</span> 2022-06-01             Vienna &lt;01&gt;                             1<span style="text-decoration: underline;">731</span>245  5.21<span style="color: #949494;">e</span>6
<span style="color: #BCBCBC;">2</span> 2022-06-01             Germany                                 8<span style="text-decoration: underline;">208</span>826  3.12<span style="color: #949494;">e</span>7
<span style="color: #BCBCBC;">3</span> 2022-06-01             other countries;Bavaria (beg.05/03) &lt;8… 9<span style="text-decoration: underline;">970</span>481  3.07<span style="color: #949494;">e</span>7
<span style="color: #949494;"># … with abbreviated variable names ¹​Arrivals, ²​`Nights spent`</span></code></pre>
<details><summary>
Show json request
</summary><div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="va">json</span></span></code></pre></div>
<div class="sourceCode" id="cb35"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">{</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"database"</span><span class="fu">:</span> <span class="st">"str:database:detouextregsai"</span><span class="fu">,</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"measures"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"str:measure:detouextregsai:F-DATA1:F-ANK"</span><span class="ot">,</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"str:measure:detouextregsai:F-DATA1:F-UEB"</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"dimensions"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="st">"str:field:detouextregsai:F-DATA1:C-C93-2"</span><span class="ot">]</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"recodes"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"str:field:detouextregsai:F-DATA1:C-C93-2"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"map"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>        <span class="ot">[</span><span class="st">"str:value:detouextregsai:F-DATA1:C-C93-2:C-C93-2:01"</span><span class="ot">],</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>        <span class="ot">[</span><span class="st">"str:value:detouextregsai:F-DATA1:C-C93-2:C-C93SUM-0:C93SUM-2"</span><span class="ot">],</span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>        <span class="ot">[</span><span class="st">"str:value:detouextregsai:F-DATA1:C-C93-2:C-C93-2:80"</span><span class="ot">,</span> <span class="st">"str:value:detouextregsai:F-DATA1:C-C93-2:C-C93SUM-0:C93SUM-3"</span><span class="ot">]</span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"total"</span><span class="fu">:</span> <span class="kw">false</span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span> </span></code></pre></div>
</details>
</div>
</div>
<div class="section level2">
<h2 id="typechecks">Typechecks<a class="anchor" aria-label="anchor" href="#typechecks"></a>
</h2>
<p>Since custom tables can become quite complicated,
<code><a href="../reference/sc_table_custom.html">sc_table_custom()</a></code> performs type-checks before sending the
request to the API. If inconsistencies are detected, warnings will be
generated. See <code><a href="../reference/sc_table_custom.html">?sc_table_custom</a></code> for a comprehensive list of
the performed checks.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sc_table_custom.html">sc_table_custom</a></span><span class="op">(</span><span class="va">tourism</span>, measures <span class="op">=</span> <span class="va">tourism</span>, dry_run <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Warning in sc_table_custom(tourism, measures = tourism, dry_run = TRUE):</span></span>
<span><span class="co">#&gt; parameter `measures` is not of type `MEASURE`, `STATFN` or `COUNT`</span></span></code></pre>
<pre><code><span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;   "database": "str:database:detouextregsai",</span></span>
<span><span class="co">#&gt;   "measures": [</span></span>
<span><span class="co">#&gt;     "str:database:detouextregsai"</span></span>
<span><span class="co">#&gt;   ],</span></span>
<span><span class="co">#&gt;   "dimensions": []</span></span>
<span><span class="co">#&gt; }</span></span></code></pre>
<details><summary>
Advanced example
</summary><div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sc_table_custom.html">sc_table_custom</a></span><span class="op">(</span><span class="st">"A"</span>, measures <span class="op">=</span> <span class="st">"B"</span>, dimensions <span class="op">=</span> <span class="st">"C"</span>, </span>
<span>                recodes <span class="op">=</span> <span class="fu"><a href="../reference/sc_table_custom.html">sc_recode</a></span><span class="op">(</span><span class="st">"D"</span>, <span class="st">"E"</span><span class="op">)</span>, dry_run <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Warning in sc_recode("D", "E"): parameters `field` and `map` might be</span></span>
<span><span class="co">#&gt; inconsistent</span></span></code></pre>
<pre><code><span><span class="co">#&gt; Warning in sc_recode("D", "E"): some entries in `map` are not of type VALUE</span></span></code></pre>
<pre><code><span><span class="co">#&gt; Warning in sc_recode("D", "E"): parameter `field` is not of type `FIELD` or</span></span>
<span><span class="co">#&gt; `VALUESET`</span></span></code></pre>
<pre><code><span><span class="co">#&gt; Warning in sc_table_custom("A", measures = "B", dimensions = "C", recodes =</span></span>
<span><span class="co">#&gt; sc_recode("D", : `recodes` and `dimensions` might be inconsistent</span></span></code></pre>
<pre><code><span><span class="co">#&gt; Warning in sc_table_custom("A", measures = "B", dimensions = "C", recodes =</span></span>
<span><span class="co">#&gt; sc_recode("D", : parameter `dimensions` is not of type `FIELD` or `VALUESET`</span></span></code></pre>
<pre><code><span><span class="co">#&gt; Warning in sc_table_custom("A", measures = "B", dimensions = "C", recodes =</span></span>
<span><span class="co">#&gt; sc_recode("D", : parameter `measures` is not of type `MEASURE`, `STATFN` or</span></span>
<span><span class="co">#&gt; `COUNT`</span></span></code></pre>
<pre><code><span><span class="co">#&gt; Warning in sc_table_custom("A", measures = "B", dimensions = "C", recodes =</span></span>
<span><span class="co">#&gt; sc_recode("D", : parameter `db` is not of type `DATABASE`</span></span></code></pre>
<pre><code><span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;   "database": "A",</span></span>
<span><span class="co">#&gt;   "measures": [</span></span>
<span><span class="co">#&gt;     "B"</span></span>
<span><span class="co">#&gt;   ],</span></span>
<span><span class="co">#&gt;   "dimensions": [</span></span>
<span><span class="co">#&gt;     ["C"]</span></span>
<span><span class="co">#&gt;   ],</span></span>
<span><span class="co">#&gt;   "recodes": {</span></span>
<span><span class="co">#&gt;     "D": {</span></span>
<span><span class="co">#&gt;       "map": [</span></span>
<span><span class="co">#&gt;         ["E"]</span></span>
<span><span class="co">#&gt;       ],</span></span>
<span><span class="co">#&gt;       "total": false</span></span>
<span><span class="co">#&gt;     }</span></span>
<span><span class="co">#&gt;   }</span></span>
<span><span class="co">#&gt; }</span></span></code></pre>
</details><p>If <code>dry_run</code> is set to <code>FALSE</code> (the default),
STATcubeR will send the request to the API even if inconsistencies are
detected. This will likely lead to an error of the form <a href="sc_last_error.html#invalid-json">“expected json but got
html”</a>.</p>
<p>If you get spurious warnings or have suggestions on how these
typechecks might be improved, please issue a feature request to the <a href="https://github.com/statistikat/STATcubeR/issues" class="external-link">STATcubeR
bugtracker</a>.</p>
</div>
<div class="section level2">
<h2 id="further-reading">Further Reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<ul>
<li>If you’ve come this far, you are probably already familiar with
<code><a href="../reference/sc_schema.html">sc_schema()</a></code>. But in case you are not, the
<a href="sc_schema.html" class="STATcubeR" data-tippy-content='&lt;div style="font-size: 14px; text-align: left;"&gt;
  &lt;b class="tippy_header"&gt;Get Metadata with the Schema Endpoint&lt;/b&gt;
  &lt;br/&gt;
  &lt;div class="tippy_body"&gt;The &lt;code&gt;/schema&lt;/code&gt; endpoint of the REST API provides metadata about databases and can also be used to retrieve a catalogue with all available databases.&lt;/div&gt;
&lt;/div&gt;'>schema article</a>
contains more information on how to get metadata from the API.</li>
<li>The
<a href="sc_data.html" class="STATcubeR" data-tippy-content='&lt;div style="font-size: 14px; text-align: left;"&gt;
  &lt;b class="tippy_header"&gt;The STATcubeR Data Class&lt;/b&gt;
  &lt;br/&gt;
  &lt;div class="tippy_body"&gt;STATcubeR uses a common base class for OGD datasets and datasets from the STATcube REST API. This article explains the core functionalities and allows you to use both datasources more flexibly.&lt;/div&gt;
&lt;/div&gt;'>STATcubeR data article</a>
showcases different ways to extract data and metadata from the return
value of <code><a href="../reference/sc_table_custom.html">sc_table_custom()</a></code>.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/GregorDeCillia" class="external-link">Gregor de Cillia</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.9000.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
