<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="The `/schema` endpoint of the REST API provides metadata about databases and can also be used to retrieve a catalogue with all available databases
">
<title>Metadata with the Schema Endpoint • STATcubeR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="../deps/bs3compat-0.2.5.1/tabs.js"></script><script src="../deps/bs3compat-0.2.5.1/bs3compat.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<link href="../syntax-highlighting.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Metadata with the Schema Endpoint">
<meta property="og:description" content="The `/schema` endpoint of the REST API provides metadata about databases and can also be used to retrieve a catalogue with all available databases
">
<meta property="og:image" content="https://statistikat.github.io/STATcubeR/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc" data-headroom>
    

      <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    <a class="navbar-brand mb-0 h1" href="../index.html">STATcubeR</a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <button type="button" id="version-badge" class="badge badge-danger d-none d-lg-block" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="In-development version">0.2.4</button>

    <div id="navbar" class="collapse navbar-collapse">
      <ul class="navbar-nav mr-auto ml-3">
<li class="nav-item">
  <a class="nav-link" href="../reference/">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/">Show All Articles ...</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>STATcube REST API</h6>
    <a class="dropdown-item" href="../articles/sc_key.html">All about the API Key</a>
    <a class="dropdown-item" href="../articles/sc_table.html">Get Data via JSON Requests</a>
    <a class="dropdown-item" href="../articles/sc_schema.html">Metadata with the /schema Endpoint</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Open Goventment Data</h6>
    <a class="dropdown-item" href="../articles/od_table.html">Getting Started with OGD Data</a>
    <a class="dropdown-item" href="../articles/od_list.html">Available Datasets</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>The STATcubeR Data Class</h6>
    <a class="dropdown-item" href="../articles/sc_data.html">A Common Class for OGD and API Data</a>
    <a class="dropdown-item" href="../articles/sc_tabulate.html">Tabulation of Data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control mr-sm-2" aria-label="Search" name="search-input" data-search-index="/dev/search.json" id="search-input" placeholder="Search..." autocomplete="off">
</form>

      <ul class="navbar-nav ml-1">
<li class="nav-item">
  <a class="external-link nav-link" href="https://data.statistik.gv.at">
    <span class="fas fa fas fa-table fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.statistik.at/web_de/services/statcube/">
    <span class="fas fa fas fa-cube fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/statistikat/STATcubeR/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
  </div>
</nav><div class="container template-article">
<script src="sc_schema_files/header-attrs-2.10/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <img src="../package-logo.png" class="pkg-logo" alt=""><div class="page-header pb-2 mt-4 mb-2 border-bottom toc-ignore">
      <h1 class="display-4" data-toc-skip>Metadata with the Schema Endpoint</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/statistikat/STATcubeR/blob/master/vignettes/sc_schema.Rmd" class="external-link"><code>vignettes/sc_schema.Rmd</code></a></small>
      <div class="d-none name"><code>sc_schema.Rmd</code></div>

    </div>

    
    
<script src="https://unpkg.com/@popperjs/core@2"></script><script src="https://unpkg.com/tippy.js@6"></script><link rel="stylesheet" href="https://unpkg.com/tippy.js@6/themes/light.css">
<script>$(document).ready(function () {
    window.setTimeout("tippy('.STATcubeR', {allowHTML: true, theme:'light rounded'});", 50);
    });
    </script><p>There are currently three functions in <a href="../index.html" data-tippy-content="
  &lt;b&gt;R package for all things STATcube&lt;/b&gt;&lt;br/&gt;
  Transfer data from the STATcube REST API or from the Open Data portal into your R sessions
  " class="STATcubeR">STATcubeR</a> that utilize the <code>/schema</code> endpoint.</p>
<ul>
<li>
<code><a href="../reference/sc_schema.html">sc_schema_catalogue()</a></code> returns an overview of all available databases and tables.</li>
<li>
<code><a href="../reference/sc_schema.html">sc_schema_db()</a></code> can be used to inspect all fields and measures for a database.</li>
<li>
<code><a href="../reference/sc_schema.html">sc_schema()</a></code> returns metadata about any resource.</li>
</ul>
<div id="browsing-the-catalogue" class="section level2">
<h2 class="hasAnchor">
<a href="#browsing-the-catalogue" class="anchor" aria-hidden="true"></a>Browsing the Catalogue</h2>
<p>The first function shows the catalogue, which lists all available databases in a tree form. The tree structure is determined by the API and closely resembles the “Katalog” view in the GUI.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_catalogue</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_schema.html">sc_schema_catalogue</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">my_catalogue</span></code></pre></div>
<p>We see that the catalog has 8 child nodes: Four childs of type <code>FOLDER</code> and four childs of type <code>TABLE</code>. The folders include all folders from the root level in the GUI: “Statistics”, “Publication and Services” as well as “Examples”.</p>
<p>To get access to the child nodes use <code>my_catalogue${child_label}</code></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_catalogue</span><span class="op">$</span><span class="va">Statistics</span></code></pre></div>
<p>The child node <code>Statistics</code> is also of class <code>sc_schema</code> and shows all entries of the subfolder. This syntax can be used to navigate through folders. In some cases, the API shows more folders than the GUI in which case the folders from the API will be empty.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_catalogue</span><span class="op">$</span><span class="va">`Default Tables`</span></code></pre></div>
</div>
<div id="databases-and-tables" class="section level2">
<h2 class="hasAnchor">
<a href="#databases-and-tables" class="anchor" aria-hidden="true"></a>Databases and Tables</h2>
<p>Inside the catalogue, the leafs of the tree are mostly of type <code>DATABASE</code> and <code>TABLE</code>. Here is an example for a <code>TABLE</code> node.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_catalogue</span><span class="op">$</span><span class="va">Statistics</span><span class="op">$</span><span class="va">`Labour Market`</span><span class="op">$</span><span class="va">`Standardtabelle / Default table (defaulttable_deake005)`</span></code></pre></div>
<p>As suggested by the output, tables can be used with the <code>/table</code> endpoint via <code><a href="../reference/sc_table.html">sc_table_saved()</a></code>. See the <a href="sc_table_saved.html" class="STATcubeR" data-tippy-content='&lt;div style="font-size: 14px; text-align: left;"&gt;
  &lt;b&gt;Load Saved Tables&lt;/b&gt;
  &lt;br/&gt;
  STATcube allows you to save tables in the GUI. You can import those saved tables using &lt;code&gt;sc_table_saved()&lt;/code&gt;. This function can also be used to import default tables for databases.
&lt;/div&gt;'>saved tables article</a> for more details.</p>
<p>Here is an example for a <code>DATABASE</code> node.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_catalogue</span><span class="op">$</span><span class="va">Statistics</span><span class="op">$</span><span class="va">`Labour Market`</span><span class="op">$</span><span class="va">`Working hours (Labour Force Survey)`</span></code></pre></div>
</div>
<div id="database-infos" class="section level2">
<h2 class="hasAnchor">
<a href="#database-infos" class="anchor" aria-hidden="true"></a>Database infos</h2>
<p>To get information about a specific database, you can pass the database <code>id</code> to <code><a href="../reference/sc_schema.html">sc_schema_db()</a></code>. Again, the contents do have a tree structure which is similar to the sidebar of the “Tabellenansicht” view.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_db_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_schema.html">sc_schema_db</a></span><span class="op">(</span><span class="st">"deake005"</span><span class="op">)</span>
<span class="va">my_db_info</span></code></pre></div>
<p><code>my_db_info</code> can be used in a similar fashion as <code>my_catalogue</code> to obtain details about the resources in the tree. For example, the <code>VALUESET</code> with the label “Gender” can be viewed like this.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_db_info</span><span class="op">$</span><span class="va">`Demographic Characteristics`</span>
<span class="va">my_db_info</span><span class="op">$</span><span class="va">`Demographic Characteristics`</span><span class="op">$</span><span class="va">Gender</span><span class="op">$</span><span class="va">Gender</span>
<span class="va">my_db_info</span><span class="op">$</span><span class="va">`Demographic Characteristics`</span><span class="op">$</span><span class="va">Gender</span><span class="op">$</span><span class="va">Gender</span><span class="op">$</span><span class="va">male</span></code></pre></div>
<p>The leafs of database schemas are mostly of type <code>VALUE</code> and <code>MEASURE</code>.</p>
</div>
<div id="data-structure-od-sc_schema-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#data-structure-od-sc_schema-objects" class="anchor" aria-hidden="true"></a>Data structure od sc_schema objects</h2>
<p>As shown above, <code>sc_schema</code> objets have a tree like structure. Each <code>sc_schema</code> object has <code>id</code>, <code>label</code>, <code>location</code> and <code>type</code> as the last four entries</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">my_db_info</span><span class="op">$</span><span class="va">`Demographic Characteristics`</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">my_catalogue</span><span class="op">$</span><span class="va">Statistics</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Schema objects can have an arbitrary amount of childs. Childs are always of type <code>sc_schema</code>. <code>x$type</code> determines the type of the schema object. See the <a href="https://docs.wingarc.com.au/superstar/9.11/open-data-api/open-data-api-reference/schema-endpoint" class="external-link">SuperSTAR API documentation</a> for a complete list of schema types.</p>
</div>
<div id="other-resources" class="section level2">
<h2 class="hasAnchor">
<a href="#other-resources" class="anchor" aria-hidden="true"></a>Other resources</h2>
<p>Information about resources other than databases and the catalogue can be obtained by passing the resource id to <code><a href="../reference/sc_schema.html">sc_schema()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_db_info</span><span class="op">$</span><span class="va">Facts</span><span class="op">$</span><span class="va">id</span>
<span class="va">group_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_schema.html">sc_schema</a></span><span class="op">(</span><span class="va">my_db_info</span><span class="op">$</span><span class="va">Facts</span><span class="op">$</span><span class="va">id</span><span class="op">)</span>
<span class="va">group_info</span></code></pre></div>
<p>Note that the tree returned only has depth 1, i.e. the child nodes of measures are not available in <code>group_info</code>. However, ids of the child nodes can be obtained with <code>$id</code>. These ids can be used to send another request to the <code>/schema</code> endpoint</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">group_info</span><span class="op">$</span><span class="va">GEWTATJAHR</span><span class="op">$</span><span class="va">id</span></code></pre></div>
<p>Alternatively, use the <code>depth</code> parameter of <code>sc_schema</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">group_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_schema.html">sc_schema</a></span><span class="op">(</span><span class="va">my_db_info</span><span class="op">$</span><span class="va">Facts</span><span class="op">$</span><span class="va">id</span>, depth <span class="op">=</span> <span class="st">"valueset"</span><span class="op">)</span></code></pre></div>
</div>
<div id="printing-with-data-tree" class="section level2">
<h2 class="hasAnchor">
<a href="#printing-with-data-tree" class="anchor" aria-hidden="true"></a>Printing with data.tree</h2>
<p>If the <a href="http://github.com/gluc/data.tree" class="external-link">data.tree</a> package is installed, it can be used for an alternative print mehtod.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">my_catalogue</span>, tree <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>The data.tree implementation can be set as a default with <code><a href="https://rdrr.io/r/base/options.html" class="external-link">options()</a></code></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>STATcubeR.print_tree <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">my_catalogue</span><span class="op">$</span><span class="va">Statistics</span></code></pre></div>
</div>
  </div>
 <div class="col-md-3 d-none d-md-block" id="pkgdown-sidebar">
        <div class="sticky-top">
    <nav id="toc"><h2 data-toc-skip>Contents</h2>

    </nav>
</div>
      </div>

</div>



      <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/GregorDeCillia" class="external-link external-link">Gregor de Cillia</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer>
</div>

  

  

  </body>
</html>
