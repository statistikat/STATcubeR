<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Get Metadata with the Schema Endpoint • STATcubeR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Get Metadata with the Schema Endpoint">
<meta name="description" content="The `/schema` endpoint of the REST API provides metadata about databases and can also be used to retrieve a catalogue with all available databases.
">
<meta property="og:description" content="The `/schema` endpoint of the REST API provides metadata about databases and can also be used to retrieve a catalogue with all available databases.
">
<meta property="og:image" content="https://statistikat.github.io/STATcubeR/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">STATcubeR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/">Show All Articles ...</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>STATcube REST API</h6></li>
    <li><a class="dropdown-item" href="../articles/sc_key.html">All about the API Key</a></li>
    <li><a class="dropdown-item" href="../articles/sc_table.html">Get Data via JSON Requests</a></li>
    <li><a class="dropdown-item" href="../articles/sc_schema.html">Metadata with the /schema Endpoint</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Open Goventment Data</h6></li>
    <li><a class="dropdown-item" href="../articles/od_table.html">Getting Started with OGD Data</a></li>
    <li><a class="dropdown-item" href="../articles/od_list.html">Available Datasets</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>The STATcubeR Data Class</h6></li>
    <li><a class="dropdown-item" href="../articles/sc_data.html">A Common Class for OGD and API Data</a></li>
    <li><a class="dropdown-item" href="../articles/sc_tabulate.html">Tabulation of Data</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://data.statistik.gv.at" aria-label="open data portal"><span class="fa fas fa-table fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.statistik.at/datenbanken/statcube-statistische-datenbank" aria-label="STATcube"><span class="fa fas fa-cube fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/statistikat/STATcubeR/" aria-label="github"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Get Metadata with the Schema Endpoint</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/statistikat/STATcubeR/blob/master/vignettes/sc_schema.Rmd" class="external-link"><code>vignettes/sc_schema.Rmd</code></a></small>
      <div class="d-none name"><code>sc_schema.Rmd</code></div>
    </div>

    
    
<pre><code><span><span class="co">## <span style="color: #00BB00;">✔</span> Key could be verified via a test request</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> The provided key will be available for this R session</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Add <span style="color: #0000BB;">`STATCUBE_KEY_EXT = XXXX`</span> to <span style="color: #005F00;">"~/.Renviron"</span> to set the key</span></span>
<span><span class="co">##   persistently. Replace <span style="color: #0000BB;">`XXXX`</span> with your key</span></span></code></pre>
<script src="https://unpkg.com/@popperjs/core@2"></script><script src="https://unpkg.com/tippy.js@6"></script><link rel="stylesheet" href="https://unpkg.com/tippy.js@6/themes/light.css">
<script>$(document).ready(function () {
    window.setTimeout("tippy('.STATcubeR', {allowHTML: true, theme:'light rounded'});", 50);
    });
    </script><p>There are currently three functions in
<a href="../index.html" data-tippy-content="
  &lt;b class='tippy_header'&gt;R package for all things STATcube&lt;/b&gt;&lt;br/&gt;
  &lt;div class='tippy_body'&gt;
    Transfer data from the STATcube REST API or from the Open Data portal into your R sessions
  &lt;/div&gt;
  " class="STATcubeR">STATcubeR</a>
that utilize the <code>/schema</code> endpoint.</p>
<ul>
<li>
<code><a href="../reference/sc_schema.html">sc_schema_catalogue()</a></code> returns an overview of all
available databases and tables.</li>
<li>
<code><a href="../reference/sc_schema.html">sc_schema_db()</a></code> can be used to inspect all fields and
measures for a database.</li>
<li>
<code><a href="../reference/sc_schema.html">sc_schema()</a></code> returns metadata about any resource.</li>
</ul>
<div class="section level2">
<h2 id="browsing-the-catalogue">Browsing the Catalogue<a class="anchor" aria-label="anchor" href="#browsing-the-catalogue"></a>
</h2>
<p>The first function shows the catalog, which lists all available
databases in a tree form. The tree structure is determined by the API
and closely resembles the “Catalog” view in the GUI.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_catalogue</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_schema.html">sc_schema_catalogue</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">my_catalogue</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #5F00D7;">FOLDER</span>: <span style="font-weight: bold;">Extern V9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Examples                  <span style="color: #5F00D7;">FOLDER</span>     9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Publications and services <span style="color: #5F00D7;">FOLDER</span>     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Default Tables            <span style="color: #5F00D7;">FOLDER</span>     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Statistics                <span style="color: #5F00D7;">FOLDER</span>    20</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> meineErsteTabelle         <span style="color: #875F00;">TABLE</span>      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> meineZweiteTabelle        <span style="color: #875F00;">TABLE</span>      0</span></span></code></pre>
<p>We see that the catalog has 8 child nodes: Four children of type
<code>FOLDER</code> and four children of type <code>TABLE</code>. The
table nodes correspond to the saved tables as described in the
<a href="sc_table_saved.html" class="STATcubeR" data-tippy-content='&lt;div style="font-size: 14px; text-align: left;"&gt;
  &lt;b class="tippy_header"&gt;Load Saved Tables&lt;/b&gt;
  &lt;br/&gt;
  &lt;div class="tippy_body"&gt;STATcube allows you to save tables in the GUI. You can import those saved tables using &lt;code&gt;sc_table_saved()&lt;/code&gt;. This function can also be used to import default tables for databases.&lt;/div&gt;
&lt;/div&gt;'>saved tables article</a>.
The folders include all folders from the root level in the <a href="%60r%20sc_browse_catalogue()%60">catalogue explorer</a>:
“Statistics”, “Publication and Services” as well as “Examples”.</p>
<p><img src="img%2Fcatalogue2.png" alt="catalogue2.png" width="50%" style="display: block; margin: auto;"></p>
<p>To get access to the child nodes use
<code>my_catalogue${child_label}</code></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_catalogue</span><span class="op">$</span><span class="va">Statistics</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #5F00D7;">FOLDER</span>: <span style="font-weight: bold;">Statistics</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Labour Market       <span style="color: #5F00D7;">FOLDER</span>    15</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Foreign Trade       <span style="color: #5F00D7;">FOLDER</span>     4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Population          <span style="color: #5F00D7;">FOLDER</span>    16</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Education, Culture  <span style="color: #5F00D7;">FOLDER</span>     5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Energy, Environment <span style="color: #5F00D7;">FOLDER</span>     2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 15 more rows</span></span></span></code></pre>
<p>The child node <code>Statistics</code> is also of class
<code>sc_schema</code> and shows all entries of the sub-folder.</p>
<p><img src="img%2Fcatalogue3.png" alt="catalogue3.png" width="50%" style="display: block; margin: auto;"></p>
<p>This syntax can be used to navigate through folders and
sub-folders.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_catalogue</span><span class="op">$</span><span class="va">Statistics</span><span class="op">$</span><span class="va">`Foreign Trade`</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #5F00D7;">FOLDER</span>: <span style="font-weight: bold;">Foreign Trade</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> TEC - Trade by enterprise characteristics <span style="color: #5F00D7;">FOLDER</span>    20</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Außenhandelsindizes                       <span style="color: #5F00D7;">FOLDER</span>     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Foreign Trade; Absolute Data              <span style="color: #5F00D7;">FOLDER</span>    12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Regional data by federal provinces        <span style="color: #5F00D7;">FOLDER</span>     6</span></span></code></pre>
<p><img src="img%2Fcatalogue4.png" alt="catalogue4.png" width="70%" style="display: block; margin: auto;"></p>
<p>In some cases, the API shows more folders than the GUI in which case
the folders from the API will be empty. Seeing an empty folder usually
means that your STATcube user is not permitted to view the contents of
the folder.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_catalogue</span><span class="op">$</span><span class="va">Statistics</span><span class="op">$</span><span class="va">`Foreign Trade`</span><span class="op">$</span><span class="va">Außenhandelsindizes</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #5F00D7;">FOLDER</span>: <span style="font-weight: bold;">Außenhandelsindizes</span></span></span></code></pre>
</div>
<div class="section level2">
<h2 id="databases-and-tables">Databases and Tables<a class="anchor" aria-label="anchor" href="#databases-and-tables"></a>
</h2>
<p>Inside the catalog, the leafs<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;In the context of tree-like data structures, leafs are
used to describe nodes of a tree which have no child nodes&lt;/p&gt;"><sup>1</sup></a> of the tree are mostly of type
<code>DATABASE</code> and <code>TABLE</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_catalogue</span><span class="op">$</span><span class="va">Statistics</span><span class="op">$</span><span class="va">`Foreign Trade`</span><span class="op">$</span><span class="va">`Regional data by federal provinces`</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #5F00D7;">FOLDER</span>: <span style="font-weight: bold;">Regional data by federal provinces</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Regional data by federal provinces and 2digits CN         <span style="color: #008787;">DATABASE</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Regional data by federal provinces and countries          <span style="color: #008787;">DATABASE</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Regional data by federal provinces and country groups     <span style="color: #008787;">DATABASE</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Standardtabelle / Default table (defaulttable_deahbdlkn2) <span style="color: #875F00;">TABLE</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Standardtabelle / Default table (defaulttable_deahbdlld)  <span style="color: #875F00;">TABLE</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more row</span></span></span></code></pre>
<p>Here is an example for the <code>DATABASE</code> node <a href="%60r%20sc_browse_database(%22deake005%22)%60"><code>deake005</code></a>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_catalogue</span><span class="op">$</span><span class="va">Statistics</span><span class="op">$</span><span class="va">`Labour Market`</span><span class="op">$</span><span class="va">`Working hours (Labour Force Survey)`</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #008787;">DATABASE</span>: <span style="font-weight: bold;">Working hours (Labour Force Survey)</span></span></span>
<span><span class="co">#&gt; # Get more metdata with <span style="color: #0000BB;">`sc_schema_db('deake005')`</span></span></span></code></pre>
<p><img src="img%2Fcatalogue_deake005.png" alt="catalogue_deake005.png" width="70%" style="display: block; margin: auto;"></p>
<p>The function <code><a href="../reference/sc_schema.html">sc_schema_db()</a></code> will be shown in the next
section. As an example for a <code>TABLE</code> node, consider the <a href="%60r%20STATcubeR:::sc_browse_table(%22defaulttable_deake005%22)%60">default
table for <code>deake005</code></a>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_catalogue</span><span class="op">$</span><span class="va">Statistics</span><span class="op">$</span><span class="va">`Labour Market`</span><span class="op">$</span></span>
<span>  <span class="va">`Standardtabelle / Default table (defaulttable_deake005)`</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #875F00;">TABLE</span>: <span style="font-weight: bold;">Standardtabelle / Default table (defaulttable_deake005)</span></span></span>
<span><span class="co">#&gt; # Get the data with <span style="color: #0000BB;">`sc_table_saved('defaulttable_deake005')`</span></span></span></code></pre>
<p><img src="img%2Fcatalogue_deake005_tables.png" alt="catalogue_deake005_tables.png" width="70%" style="display: block; margin: auto;"></p>
<p>As suggested by the output, tables can be loaded with the
<code>/table</code> endpoint via <code><a href="../reference/sc_table.html">sc_table_saved()</a></code>. See the
<a href="sc_table_saved.html" class="STATcubeR" data-tippy-content='&lt;div style="font-size: 14px; text-align: left;"&gt;
  &lt;b class="tippy_header"&gt;Load Saved Tables&lt;/b&gt;
  &lt;br/&gt;
  &lt;div class="tippy_body"&gt;STATcube allows you to save tables in the GUI. You can import those saved tables using &lt;code&gt;sc_table_saved()&lt;/code&gt;. This function can also be used to import default tables for databases.&lt;/div&gt;
&lt;/div&gt;'>saved tables article</a>
for more details.</p>
</div>
<div class="section level2">
<h2 id="database-infos">Database Infos<a class="anchor" aria-label="anchor" href="#database-infos"></a>
</h2>
<p>To get information about a specific database, you can pass the
database <code>id</code> to <code><a href="../reference/sc_schema.html">sc_schema_db()</a></code>. Similar to
<code><a href="../reference/sc_schema.html">sc_schema_catalogue()</a></code>, the return value has a tree-like
data structure.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_db_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_schema.html">sc_schema_db</a></span><span class="op">(</span><span class="st">"deake005"</span><span class="op">)</span></span>
<span><span class="va">my_db_info</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #008787;">DATABASE</span>: <span style="font-weight: bold;">Working hours (Labour Force Survey)</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Factors                     <span style="color: #5F00D7;">GROUP</span>     9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Datensätze/Records          <span style="color: #5F00D7;">GROUP</span>     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Time (mandatory field)      <span style="color: #5F00D7;">GROUP</span>     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Demographic Characteristics <span style="color: #5F00D7;">GROUP</span>     8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Employment Characteristics  <span style="color: #5F00D7;">GROUP</span>     6</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more rows</span></span></span></code></pre>
<p>For comparison, here is a screenshot from the sidebar of the table
view for <a href="%60r%20sc_browse_database(%22deake005%22)%60"><code>deake005</code></a>
which has a similar (but not identical) structure.</p>
<p><img src="img%2Ftable_view.png" alt="table_view.png" width="70%" style="display: block; margin: auto;"></p>
<p><code>my_db_info</code> can be used in a similar fashion as
<code>my_catalogue</code> to obtain details about the resources in the
tree. For example, the <code>VALUESET</code> with the label “Gender” can
be viewed like this.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_db_info</span><span class="op">$</span><span class="va">`Demographic Characteristics`</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #5F00D7;">GROUP</span>: <span style="font-weight: bold;">Demographic Characteristics</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Gender                                                        <span style="color: #00BBBB;">FIELD</span>     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Age in years-groups                                           <span style="color: #00BBBB;">FIELD</span>     3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Highest level of training completed (national classification) <span style="color: #00BBBB;">FIELD</span>     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Highest level of training completed (ISCED 97)                <span style="color: #00BBBB;">FIELD</span>     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Highest level of training completed (ISCED 2011)              <span style="color: #00BBBB;">FIELD</span>     2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more rows</span></span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_db_info</span><span class="op">$</span><span class="va">`Demographic Characteristics`</span><span class="op">$</span><span class="va">Gender</span><span class="op">$</span><span class="va">Gender</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #87AFAF;">VALUESET</span>: <span style="font-weight: bold;">Gender</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> male                 <span style="color: #5F00D7;">VALUE</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> female               <span style="color: #5F00D7;">VALUE</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Not classifiable &lt;0&gt; <span style="color: #5F00D7;">VALUE</span></span></span></code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_db_info</span><span class="op">$</span><span class="va">`Demographic Characteristics`</span><span class="op">$</span><span class="va">Gender</span><span class="op">$</span><span class="va">Gender</span><span class="op">$</span><span class="va">male</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #5F00D7;">VALUE</span>: <span style="font-weight: bold;">male</span></span></span></code></pre>
<p>The leafs of database schemas are mostly of type <code>VALUE</code>
and <code>MEASURE</code>.</p>
</div>
<div class="section level2">
<h2 id="data-structure-of-sc_schema-objects">Data Structure of sc_schema Objects<a class="anchor" aria-label="anchor" href="#data-structure-of-sc_schema-objects"></a>
</h2>
<p>As shown above, <code>sc_schema</code> objects have a tree like
structure. Each <code>sc_schema</code> object has <code>id</code>,
<code>label</code>, <code>location</code> and <code>type</code> as the
last four entries</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">my_db_info</span><span class="op">$</span><span class="va">`Demographic Characteristics`</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; List of 4</span></span>
<span><span class="co">#&gt;  $ id      : chr "str:group:deake005:X_B1"</span></span>
<span><span class="co">#&gt;  $ label   : chr "Demographic Characteristics"</span></span>
<span><span class="co">#&gt;  $ location: chr "http://statcubeapi.statistik.at/statistik.at/ext/statcube/rest/v1/schema/str:group:deake005:X_B1"</span></span>
<span><span class="co">#&gt;  $ type    : chr "GROUP"</span></span></code></pre>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">my_catalogue</span><span class="op">$</span><span class="va">Statistics</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; List of 4</span></span>
<span><span class="co">#&gt;  $ id      : chr "str:folder:festat"</span></span>
<span><span class="co">#&gt;  $ label   : chr "Statistics"</span></span>
<span><span class="co">#&gt;  $ location: chr "http://statcubeapi.statistik.at/statistik.at/ext/statcube/rest/v1/schema/str:folder:festat"</span></span>
<span><span class="co">#&gt;  $ type    : chr "FOLDER"</span></span></code></pre>
<p>Schema objects can have an arbitrary amount of children. Children are
always of type <code>sc_schema</code>. <code>x$type</code> contains the
type of the schema object. A complete list of schema types is available
in the <a href="https://docs.wingarc.com.au/superstar/9.12/open-data-api/open-data-api-reference/schema-endpoint" class="external-link">API
reference</a>.</p>
</div>
<div class="section level2">
<h2 id="other-resources">Other Resources<a class="anchor" aria-label="anchor" href="#other-resources"></a>
</h2>
<p>Information about resources other than databases and the catalog can
be obtained by passing the resource id to <code><a href="../reference/sc_schema.html">sc_schema()</a></code>.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">id</span> <span class="op">&lt;-</span> <span class="va">my_db_info</span><span class="op">$</span><span class="va">Factors</span><span class="op">$</span><span class="va">id</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "str:group:deake005:M_F1"</span></span>
<span><span class="va">group_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_schema.html">sc_schema</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span><span class="va">group_info</span></span>
<span><span class="co">#&gt; <span style="color: #5F00D7;">GROUP</span>: <span style="font-weight: bold;">Factors</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Average hours actually worked per week                             <span style="color: #875F00;">MEASURE</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Average hours usually worked per week                              <span style="color: #875F00;">MEASURE</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Volume of hours worked in the main job per year in million hours   <span style="color: #875F00;">MEASURE</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Volume of hours worked overtime (paid) per year in million hours   <span style="color: #875F00;">MEASURE</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Volume of hours worked overtime (unpaid) per year in million hours <span style="color: #875F00;">MEASURE</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 4 more rows</span></span></span></code></pre></div>
<p>Note that the tree returned only has depth 1, i.e. the child nodes of
measures are not available in <code>group_info</code>. However, ids of
the child nodes can be obtained with <code>$id</code>. These ids can be
used to send another request to the <code>/schema</code> endpoint</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">id</span> <span class="op">&lt;-</span> <span class="va">group_info</span><span class="op">$</span><span class="va">`Average hours usually worked per week`</span><span class="op">$</span><span class="va">id</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "str:measure:deake005:F-DATA:F-FAKTOR2"</span></span>
<span><span class="va">measure_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_schema.html">sc_schema</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span></code></pre></div>
<p>Alternatively, use the <code>depth</code> parameter of
<code><a href="../reference/sc_schema.html">sc_schema()</a></code>. This will make sure that the entries of the
tree are returned recursively up to a certain level. For example,
<code>depth = "VALUESET"</code> will use the same level of recursion as
<code><a href="../reference/sc_schema.html">sc_schema_db()</a></code>. See <code><a href="../reference/sc_schema.html">?sc_schema</a></code> for all
available options of the <code>depth</code> parameter.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">group_info</span> <span class="op">&lt;-</span> <span class="va">my_db_info</span><span class="op">$</span><span class="va">`Demographic Characteristics`</span><span class="op">$</span><span class="va">id</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="../reference/sc_schema.html">sc_schema</a></span><span class="op">(</span>depth <span class="op">=</span> <span class="st">"valueset"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="printing-with-data-tree">Printing with data.tree<a class="anchor" aria-label="anchor" href="#printing-with-data-tree"></a>
</h2>
<p>If the <a href="https://github.com/gluc/data.tree" class="external-link">data.tree</a> package is installed, it can be used
for an alternative print method.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">group_info</span>, tree <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;                           levelName     type</span></span>
<span><span class="co">#&gt; 1  Demographic Characteristics         GROUP</span></span>
<span><span class="co">#&gt; 2   ¦--Gender                          FIELD</span></span>
<span><span class="co">#&gt; 3   ¦   °--Gender                   VALUESET</span></span>
<span><span class="co">#&gt; 4   ¦       ¦--male                    VALUE</span></span>
<span><span class="co">#&gt; 5   ¦       ¦--female                  VALUE</span></span>
<span><span class="co">#&gt; 6   ¦       °--Not classifiable &lt;0&gt;    VALUE</span></span>
<span><span class="co">#&gt; 7   ¦--Age in years-groups             FIELD</span></span>
<span><span class="co">#&gt; 8   ¦   ¦--Age in years-groups      VALUESET</span></span>
<span><span class="co">#&gt; 9   ¦   ¦   ¦--Under 15 years          VALUE</span></span>
<span><span class="co">#&gt; 10  ¦   ¦   ¦--15 to 19 years          VALUE</span></span>
<span><span class="co">#&gt; 11  ¦   ¦   ¦--20 to 24 years          VALUE</span></span>
<span><span class="co">#&gt; 12  ¦   ¦   ¦--25 to 29 years          VALUE</span></span>
<span><span class="co">#&gt; 13  ¦   ¦   ¦--30 to 34 years          VALUE</span></span>
<span><span class="co">#&gt; 14  ¦   ¦   ¦--35 to 39 years          VALUE</span></span>
<span><span class="co">#&gt; 15  ¦   ¦   ¦--40 to 44 years          VALUE</span></span>
<span><span class="co">#&gt; 16  ¦   ¦   ¦--45 to 49 years          VALUE</span></span>
<span><span class="co">#&gt; 17  ¦   ¦   ¦--50 to 54 years          VALUE</span></span>
<span><span class="co">#&gt; 18  ¦   ¦   ¦--55 to 59 years          VALUE</span></span>
<span><span class="co">#&gt; 19  ¦   ¦   ¦--60 to 64 years          VALUE</span></span>
<span><span class="co">#&gt; 20  ¦   ¦   ¦--65 to 69 years          VALUE</span></span>
<span><span class="co">#&gt; 21  ¦   ¦   ¦--70 to 74 years          VALUE</span></span>
<span><span class="co">#&gt; 22  ¦   ¦   ¦--75 years and older      VALUE</span></span>
<span><span class="co">#&gt; 23  ¦   ¦   °--Not classifiable &lt;0&gt;    VALUE</span></span>
<span><span class="co">#&gt; 24  ¦   ¦--Alter in Jahresgruppen   VALUESET</span></span>
<span><span class="co">#&gt; 25  ¦   ¦   ¦--Under 15 years          VALUE</span></span>
<span><span class="co">#&gt; 26  ¦   ¦   ¦--15 to 24 years          VALUE</span></span>
<span><span class="co">#&gt; 27  ¦   ¦   ¦--25 to 34 years          VALUE</span></span>
<span><span class="co">#&gt; 28  ¦   ¦   ¦--35 to 44 years          VALUE</span></span>
<span><span class="co">#&gt; 29  ¦   ¦   ¦--45 to 54 years          VALUE</span></span>
<span><span class="co">#&gt; 30  ¦   ¦   °--... 3 nodes w/ 0 sub         </span></span>
<span><span class="co">#&gt; 31  ¦   °--... 1 nodes w/ 6 sub             </span></span>
<span><span class="co">#&gt; 32  °--... 6 nodes w/ 80 sub</span></span></code></pre>
<p>The <a href="https://github.com/gluc/data.tree" class="external-link">data.tree</a> implementation of the print method can
be set as a default using the option
<code>STATcubeR.print_tree</code></p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>STATcubeR.print_tree <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="flatten-a-schema">Flatten a Schema<a class="anchor" aria-label="anchor" href="#flatten-a-schema"></a>
</h2>
<p>The function <code><a href="../reference/sc_schema.html">sc_schema_flatten()</a></code> can be used to turn
responses from the <code>/schema</code> endpoint into
<code>data.frame</code>s. The following call extracts all databases from
the catalog and displays their ids and labels.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sc_schema.html">sc_schema_catalogue</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="../reference/sc_schema.html">sc_schema_flatten</a></span><span class="op">(</span><span class="st">"DATABASE"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A data frame: 666 × 2</span>
  <span style="font-weight: bold;">id</span>                               <span style="font-weight: bold;">label</span>                 
  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 
<span style="color: #BCBCBC;">1</span> str:database:dedemo              Communes (Demo)       
<span style="color: #BCBCBC;">2</span> str:database:depeople            People                
<span style="color: #BCBCBC;">3</span> str:database:depeopleml          People multilingual   
<span style="color: #BCBCBC;">4</span> str:database:deretailml          Retail Banking ML en  
<span style="color: #BCBCBC;">5</span> str:database:dekonjunkturmonitor Economic trend monitor
<span style="color: #949494;"># ℹ 661 more rows</span></code></pre>
<p>The string <code>"DATABASE"</code> in the previous example acts as a
filter to make sure only nodes with the schema type
<code>DATABASE</code> are included in the table.</p>
<p>If <code>"DATABASE"</code> is replaced with <code>"TABLE"</code>, all
tables will be displayed. This includes</p>
<ul>
<li>All the default-tables on STATcube. Most databases have an
associated default table.</li>
<li>All saved tables for the current user as described in the
<a href="sc_table_saved.html" class="STATcubeR" data-tippy-content='&lt;div style="font-size: 14px; text-align: left;"&gt;
  &lt;b class="tippy_header"&gt;Load Saved Tables&lt;/b&gt;
  &lt;br/&gt;
  &lt;div class="tippy_body"&gt;STATcube allows you to save tables in the GUI. You can import those saved tables using &lt;code&gt;sc_table_saved()&lt;/code&gt;. This function can also be used to import default tables for databases.&lt;/div&gt;
&lt;/div&gt;'>saved tables article</a>.</li>
<li>Other saved tables. Some databases do not only provide a default
table but also several other tables. See <a href="https://portal.statistik.at/statistik.at/ext/statcube/openinfopage?id=degvk_fahrt_2010" class="external-link">this
database on transport statistics</a> as an example for database with
more than one associated table</li>
</ul>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sc_schema.html">sc_schema_catalogue</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="../reference/sc_schema.html">sc_schema_flatten</a></span><span class="op">(</span><span class="st">"TABLE"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A data frame: 699 × 2</span>
  <span style="font-weight: bold;">id</span>                                             <span style="font-weight: bold;">label</span>                          
  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          
<span style="color: #BCBCBC;">1</span> str:table:7f851bfd-4bc0-4cc7-9013-e3c7982c9842 Monitoring                     
<span style="color: #BCBCBC;">2</span> str:table:defaulttable_depeopleml              Standardtabelle / Default tabl…
<span style="color: #BCBCBC;">3</span> str:table:defaulttable_dedemo                  Standardtabelle / Default tabl…
<span style="color: #BCBCBC;">4</span> str:table:E-A_nach_Bundeslaendern_dedemo       E-A_nach_Bundeslaendern_dedemo 
<span style="color: #BCBCBC;">5</span> str:table:Jahre_nach_NUTS_dedemo               Jahre_nach_NUTS_dedemo         
<span style="color: #949494;"># ℹ 694 more rows</span></code></pre>
<p><code><a href="../reference/sc_schema.html">sc_schema_flatten()</a></code> can also be used with
<code><a href="../reference/sc_schema.html">sc_schema_db()</a></code> and <code><a href="../reference/sc_schema.html">sc_schema()</a></code>. The following
example shows all available measures from the <a href="https://portal.statistik.at/statistik.at/ext/statcube/openinfopage?id=dekonjunkturmonitor" class="external-link">economic
trend monitor database</a>.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sc_schema.html">sc_schema_db</a></span><span class="op">(</span><span class="st">"dekonjunkturmonitor"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="../reference/sc_schema.html">sc_schema_flatten</a></span><span class="op">(</span><span class="st">"MEASURE"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A data frame: 88 × 2</span>
  <span style="font-weight: bold;">id</span>                                              <span style="font-weight: bold;">label</span>                         
  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                         
<span style="color: #BCBCBC;">1</span> str:measure:dekonjunkturmonitor:F-DATA:F-FAKT-1 Production index industry (wd…
<span style="color: #BCBCBC;">2</span> str:measure:dekonjunkturmonitor:F-DATA:F-FAKT-2 Technical total production in…
<span style="color: #BCBCBC;">3</span> str:measure:dekonjunkturmonitor:F-DATA:F-FAKT-3 Turnover index industry (2021…
<span style="color: #BCBCBC;">4</span> str:measure:dekonjunkturmonitor:F-DATA:F-FAKT-4 Turnover industry (in 1.000 €)
<span style="color: #BCBCBC;">5</span> str:measure:dekonjunkturmonitor:F-DATA:F-FAKT-5 Index of new orders industry …
<span style="color: #949494;"># ℹ 83 more rows</span></code></pre>
</div>
<div class="section level2">
<h2 id="further-reading">Further Reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<ul>
<li>Schemas can be used to construct table requests as described in the
<a href="sc_table_custom.html" class="STATcubeR" data-tippy-content='&lt;div style="font-size: 14px; text-align: left;"&gt;
  &lt;b class="tippy_header"&gt;Define Custom Tables&lt;/b&gt;
  &lt;br/&gt;
  &lt;div class="tippy_body"&gt;Define custom requests against the &lt;code&gt;/table&lt;/code&gt; endpoint programmatically by providing character vectors with ids of databases, measures and classification fields.&lt;/div&gt;
&lt;/div&gt;'>custom tables article</a>
</li>
<li>See the
<a href="sc_table_saved.html" class="STATcubeR" data-tippy-content='&lt;div style="font-size: 14px; text-align: left;"&gt;
  &lt;b class="tippy_header"&gt;Load Saved Tables&lt;/b&gt;
  &lt;br/&gt;
  &lt;div class="tippy_body"&gt;STATcube allows you to save tables in the GUI. You can import those saved tables using &lt;code&gt;sc_table_saved()&lt;/code&gt;. This function can also be used to import default tables for databases.&lt;/div&gt;
&lt;/div&gt;'>saved tables article</a>
to get access to the data for table nodes in the schema.</li>
</ul>
<script>
$('[href^="https://portal.statistik.at/statistik.at/ext/statcube"]').attr("target", "_blank");
</script>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/bernhard-da" class="external-link">Bernhard Meindl</a>, <a href="https://github.com/GregorDeCillia" class="external-link">Gregor de Cillia</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
