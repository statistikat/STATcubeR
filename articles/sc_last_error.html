<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="STATcubeR converts all http errors into R errors. This atricle explains how this conversion happens and showcases some common error messages.
">
<title>Handling API Errors • STATcubeR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Handling API Errors">
<meta property="og:description" content="STATcubeR converts all http errors into R errors. This atricle explains how this conversion happens and showcases some common error messages.
">
<meta property="og:image" content="https://statistikat.github.io/STATcubeR/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">STATcubeR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.4.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/">Show All Articles ...</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>STATcube REST API</h6>
    <a class="dropdown-item" href="../articles/sc_key.html">All about the API Key</a>
    <a class="dropdown-item" href="../articles/sc_table.html">Get Data via JSON Requests</a>
    <a class="dropdown-item" href="../articles/sc_schema.html">Metadata with the /schema Endpoint</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Open Goventment Data</h6>
    <a class="dropdown-item" href="../articles/od_table.html">Getting Started with OGD Data</a>
    <a class="dropdown-item" href="../articles/od_list.html">Available Datasets</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>The STATcubeR Data Class</h6>
    <a class="dropdown-item" href="../articles/sc_data.html">A Common Class for OGD and API Data</a>
    <a class="dropdown-item" href="../articles/sc_tabulate.html">Tabulation of Data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://data.statistik.gv.at" aria-label="open data portal">
    <span class="fas fa fas fa-table fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.statistik.at/datenbanken/statcube-statistische-datenbank" aria-label="STATcube">
    <span class="fas fa fas fa-cube fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/statistikat/STATcubeR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Handling API Errors</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/statistikat/STATcubeR/blob/HEAD/vignettes/sc_last_error.Rmd" class="external-link"><code>vignettes/sc_last_error.Rmd</code></a></small>
      <div class="d-none name"><code>sc_last_error.Rmd</code></div>
    </div>

    
    
<script src="https://unpkg.com/@popperjs/core@2"></script><script src="https://unpkg.com/tippy.js@6"></script><link rel="stylesheet" href="https://unpkg.com/tippy.js@6/themes/light.css">
<script>$(document).ready(function () {
    window.setTimeout("tippy('.STATcubeR', {allowHTML: true, theme:'light rounded'});", 50);
    });
    </script><p>This article explains how
<a href="../index.html" data-tippy-content="
  &lt;b class='tippy_header'&gt;R package for all things STATcube&lt;/b&gt;&lt;br/&gt;
  &lt;div class='tippy_body'&gt;
    Transfer data from the STATcube REST API or from the Open Data portal into your R sessions
  &lt;/div&gt;
  " class="STATcubeR">STATcubeR</a>
deals with situations where the communication with the STATcube REST API
leads to exceptions such as error codes.</p>
<div class="section level2">
<h2 id="throw-all-the-errors">Throw all the Errors<a class="anchor" aria-label="anchor" href="#throw-all-the-errors"></a>
</h2>
<p>All http errors codes from the REST API will be turned into R errors.
More precisely, the following conditions are checked to determine wether
a request to the STATcube API was successful</p>
<ul>
<li>The response returns <code>FALSE</code> for
<code><a href="https://httr.r-lib.org/reference/http_error.html" class="external-link">httr::http_error()</a></code> which means the response status is less
than 400. See the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status?retiredLocale=de" class="external-link">MDN
reference</a> for more information about http status codes.</li>
<li>The content type of the response is “application/json”.</li>
</ul>
<p>If at least one of those two conditions is not met, an error is
thrown. This is different from the approach taken by other API clients,
which will retry requests after certain timeouts or return an “error
object”.</p>
</div>
<div class="section level2">
<h2 id="get-details-about-errors">Get details about errors<a class="anchor" aria-label="anchor" href="#get-details-about-errors"></a>
</h2>
<p>If you encounter an error, you can get more details via
<code><a href="../reference/sc_last_error.html">sc_last_error()</a></code> or <code><a href="../reference/sc_last_error.html">sc_last_error_parsed()</a></code>.
This will return the (parsed) response object that triggered the
error.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/other_endpoints.html">sc_info</a></span><span class="op">(</span>key <span class="op">=</span> <span class="st">"wrong key"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error: Client error: (401) Unauthorized ...</span></span>
<span><span class="fu"><a href="../reference/sc_last_error.html">sc_last_error_parsed</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; List of 3</span></span>
<span><span class="co">#&gt;  $ request:List of 2</span></span>
<span><span class="co">#&gt;   ..$ method: chr "GET"</span></span>
<span><span class="co">#&gt;   ..$ url   : chr "https://statcubeapi.statistik.at/statistik.at/ext/statcube/rest/v1/info"</span></span>
<span><span class="co">#&gt;  $ content:List of 2</span></span>
<span><span class="co">#&gt;   ..$ message  : chr "Error authenticating API key. Please contact your system administrator."</span></span>
<span><span class="co">#&gt;   ..$ errorType: chr "AUTHENTICATION"</span></span>
<span><span class="co">#&gt;  $ status :List of 3</span></span>
<span><span class="co">#&gt;   ..$ category: chr "Client error"</span></span>
<span><span class="co">#&gt;   ..$ reason  : chr "Unauthorized"</span></span>
<span><span class="co">#&gt;   ..$ message : chr "Client error: (401) Unauthorized"</span></span></code></pre>
<p><code><a href="../reference/sc_last_error.html">sc_last_error()</a></code> returns the same response but in the
format returned by <code><a href="https://httr.r-lib.org/reference/GET.html" class="external-link">httr::GET()</a></code>. It is more flexible than
<code><a href="../reference/sc_last_error.html">sc_last_error_parsed()</a></code> but requires you to parse the object
yourself. See <code><a href="https://httr.r-lib.org/reference/content.html" class="external-link">?httr::content</a></code> to and
<code><a href="https://httr.r-lib.org/reference/headers.html" class="external-link">?httr::headers</a></code> to get started.</p>
</div>
<div class="section level2">
<h2 id="common-errors">Common Errors<a class="anchor" aria-label="anchor" href="#common-errors"></a>
</h2>
<p>This section showcases the most common types of errors that you might
encounter when interacting with the API. Please feel free to open a new
issue on the <a href="https://github.com/statistikat/STATcubeR/issues" class="external-link">STATcubeR issue
tracker</a> if you get an error which is not listed here.</p>
<div class="section level3">
<h3 id="invalid-api-key">Invalid API Key<a class="anchor" aria-label="anchor" href="#invalid-api-key"></a>
</h3>
<p>If an invalid API key is used for a request, a 401 status is
returned.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/other_endpoints.html">sc_info</a></span><span class="op">(</span>key <span class="op">=</span> <span class="st">"wrong key"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Error: Client error: (401) Unauthorized</span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;   "message": "Error authenticating API key. Please contact your system administrator.",</span></span>
<span><span class="co">#&gt;   "errorType": "AUTHENTICATION"</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; see <span style="color: #555555;">sc_last_error()</span> for more details</span></span></code></pre>
<p>This example passes the API key as a parameter for simplicity. In
practice, you should set up your key according to the
<a href="sc_key.html" class="STATcubeR" data-tippy-content='&lt;div style="font-size: 14px; text-align: left;"&gt;
  &lt;b class="tippy_header"&gt;Set Up the API Key&lt;/b&gt;
  &lt;br/&gt;
  &lt;div class="tippy_body"&gt;Learn how get access to an API key and set up authentication to the STATcube REST API by making the key available for STATcubeR.&lt;/div&gt;
&lt;/div&gt;'>API key article</a>.</p>
</div>
<div class="section level3">
<h3 id="api-not-accessible">API Not Accessible<a class="anchor" aria-label="anchor" href="#api-not-accessible"></a>
</h3>
<p>This occurs if
<a href="../index.html" data-tippy-content="
  &lt;b class='tippy_header'&gt;R package for all things STATcube&lt;/b&gt;&lt;br/&gt;
  &lt;div class='tippy_body'&gt;
    Transfer data from the STATcube REST API or from the Open Data portal into your R sessions
  &lt;/div&gt;
  " class="STATcubeR">STATcubeR</a>
tries to send requests to a server which is not accessible for the
current environment. This will result in a timout error.</p>
<pre><code>Error in curl::curl_fetch_memory(url, handle = handle) : 
  Timeout was reached: [${server}] Resolving timed out after 10000 milliseconds</code></pre>
<p>Outside of the Statistics Austria firewall, the only working base URL
is the following.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">STATcubeR</span><span class="fu">:::</span><span class="fu">base_url</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] "https://statcubeapi.statistik.at/statistik.at/ext/statcube/rest/v1"</span></span></code></pre>
<p>Reasons this error might occur</p>
<ol style="list-style-type: decimal">
<li>Your package Version of
<a href="../index.html" data-tippy-content="
  &lt;b class='tippy_header'&gt;R package for all things STATcube&lt;/b&gt;&lt;br/&gt;
  &lt;div class='tippy_body'&gt;
    Transfer data from the STATcube REST API or from the Open Data portal into your R sessions
  &lt;/div&gt;
  " class="STATcubeR">STATcubeR</a>
is outdated (version &lt; 0.4.0)</li>
<li>Your company uses a firewall that blocks API requests from
leaving.</li>
<li>You manually set the <code>server</code> parameter in one of the API
functions (<code><a href="../reference/sc_table.html">sc_table()</a></code>, <code><a href="../reference/sc_schema.html">sc_schema()</a></code>, …) to
something other than <code>"ext"</code>.</li>
<li>(Statistics Austria Employees only) You downloaded a json request
from one of our internal STATcube servers and try to use this request
with <code><a href="../reference/sc_table.html">sc_table()</a></code> from outside.</li>
</ol>
<p>Note to future-self: It might be a good idea to set up some
environment variables on Statistic Austrias internal R servers to avoid
(3) and (4).</p>
</div>
<div class="section level3">
<h3 id="rate-limit-exceeded">Rate Limit Exceeded<a class="anchor" aria-label="anchor" href="#rate-limit-exceeded"></a>
</h3>
<p>If the rate limit for the amount of requests against the
<code>/table</code> endpoint is exceeded, the following error will be
shown.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sc_table.html">sc_table_saved</a></span><span class="op">(</span><span class="st">"defaulttable_deake005"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Error: expected a response of type "application/json" but got "text/html"</span></span>
<span><span class="co">#&gt;   possible reasons:</span></span>
<span><span class="co">#&gt;   - rate limit exceeded. Check with <span style="color: #555555;">sc_rate_limit_table()</span></span></span>
<span><span class="co">#&gt;   - invalid json body (sc_table, sc_table_custom)</span></span>
<span><span class="co">#&gt;   see <span style="color: #555555;">sc_last_error()</span> for more details</span></span></code></pre>
<p>If you encounter this error, please check if the rate limits are in
fact a plauible reason by using <code><a href="../reference/other_endpoints.html">sc_rate_limit_table()</a></code>.
Unfortunately, the response for exceeded rate limits is very generic and
can not be differentiated from the response for invalid json-bodies (see
below). This is why the error message lists two possible reasons.</p>
</div>
<div class="section level3">
<h3 id="schema">Schema<a class="anchor" aria-label="anchor" href="#schema"></a>
</h3>
<p>Invalid URIs used with <code>sc_schema</code> will be displayed with
a special error type <code>SCHEMA_COMPONENT_NOT_FOUND</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sc_schema.html">sc_schema</a></span><span class="op">(</span><span class="st">"invalid_uri"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Error: Client error: (400) Bad Request</span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;   "message": "Could not find the requested component: invalid_uri.",</span></span>
<span><span class="co">#&gt;   "errorType": "SCHEMA_COMPONENT_NOT_FOUND",</span></span>
<span><span class="co">#&gt;   "component": "invalid_uri"</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; see <span style="color: #555555;">sc_last_error()</span> for more details</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="saved-tables">Saved Tables<a class="anchor" aria-label="anchor" href="#saved-tables"></a>
</h3>
<p>As mentioned in the
<a href="sc_table_saved.html" class="STATcubeR" data-tippy-content='&lt;div style="font-size: 14px; text-align: left;"&gt;
  &lt;b class="tippy_header"&gt;Load Saved Tables&lt;/b&gt;
  &lt;br/&gt;
  &lt;div class="tippy_body"&gt;STATcube allows you to save tables in the GUI. You can import those saved tables using &lt;code&gt;sc_table_saved()&lt;/code&gt;. This function can also be used to import default tables for databases.&lt;/div&gt;
&lt;/div&gt;'>saved tables article</a>,
the function <code><a href="../reference/sc_table.html">sc_table_saved()</a></code> can only access default
tables and tables that are saved under the current user. If an invalid
table URI is passed, the server will respond with a status code of
400.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sc_table.html">sc_table_saved</a></span><span class="op">(</span><span class="st">"invalid_uri"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Error: Client error: (400) Bad Request</span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;   "message": "The requested TXD 'str:table:invalid_uri' could not be found for the current user.",</span></span>
<span><span class="co">#&gt;   "errorType": "TXD_NOT_FOUND",</span></span>
<span><span class="co">#&gt;   "component": "str:table:invalid_uri"</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; see <span style="color: #555555;">sc_last_error()</span> for more details</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="invalid-json">Invalid JSON<a class="anchor" aria-label="anchor" href="#invalid-json"></a>
</h3>
<p>If a request against the <code>/table</code> endpoint uses an invalid
URI in the json body, this will trigger a content-type error. To
showcase this, <code><a href="../reference/sc_table.html">sc_table()</a></code> is used. However, invalid URIs
that are used with <code><a href="../reference/sc_table_custom.html">sc_table_custom()</a></code> will throw the same
error.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="st">"request.json"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span>sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"database"</span><span class="fu">:</span> <span class="st">"str:database:detouextregsai"</span><span class="fu">,</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"measures"</span><span class="fu">:</span> <span class="ot">[</span> <span class="st">"str:measure:detouextregsai:F-DATA1:INVALID"</span> <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"dimensions"</span><span class="fu">:</span> <span class="ot">[[</span> <span class="st">"str:field:detouextregsai:F-DATA1:C-SDB_TIT-0"</span> <span class="ot">]]</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sc_table.html">sc_table</a></span><span class="op">(</span><span class="st">"request.json"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Error: expected a response of type "application/json" but got "text/html"</span></span>
<span><span class="co">#&gt;   possible reasons:</span></span>
<span><span class="co">#&gt;   - rate limit exceeded. Check with <span style="color: #555555;">sc_rate_limit_table()</span></span></span>
<span><span class="co">#&gt;   - invalid json body (sc_table, sc_table_custom)</span></span>
<span><span class="co">#&gt;   see <span style="color: #555555;">sc_last_error()</span> for more details</span></span></code></pre>
<p>Unfortunately, the response for invalid json bodies is very generic
and can not be differentiated from the response for exceeded rate limits
(see above). This is why the error message lists two possible
reasons.</p>
<p>If you encounter this error during the workflow described in the
<a href="sc_table.html" class="STATcubeR" data-tippy-content='&lt;div style="font-size: 14px; text-align: left;"&gt;
  &lt;b class="tippy_header"&gt;Get Tables via JSON Requests&lt;/b&gt;
  &lt;br/&gt;
  &lt;div class="tippy_body"&gt;Hands-on guide about transfering data from the STATcube GUI (table view) to R sessions via a the download option &amp;ldquo;open data api request&amp;rdquo;.&lt;/div&gt;
&lt;/div&gt;'>JSON requests article</a>,
it is very likely caused by exceeded rate limits. This is because json
request that are downloaded by the STATcube GUI should always contain
valid URIs. However, if you either modify the downloaded json requests
or use <code><a href="../reference/sc_table_custom.html">sc_table_custom()</a></code>, the reason “invalid json body” is
plausible.</p>
</div>
</div>
<div class="section level2">
<h2 id="custom-error-handling">Custom Error Handling<a class="anchor" aria-label="anchor" href="#custom-error-handling"></a>
</h2>
<p>If you want to use your own error-handling instead of the default
<a href="../index.html" data-tippy-content="
  &lt;b class='tippy_header'&gt;R package for all things STATcube&lt;/b&gt;&lt;br/&gt;
  &lt;div class='tippy_body'&gt;
    Transfer data from the STATcube REST API or from the Open Data portal into your R sessions
  &lt;/div&gt;
  " class="STATcubeR">STATcubeR</a>
error handlers, you can get started with the following code sample from
one of our <a href="https://shiny.rstudio.com/" class="external-link">shiny</a> applications.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">button_load_data</span>, <span class="op">{</span></span>
<span>  <span class="va">table</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu">STATcubeR</span><span class="fu">::</span><span class="fu"><a href="../reference/sc_table.html">sc_table_saved</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">id</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">inherits</a></span><span class="op">(</span><span class="va">table</span>, <span class="st">"try-error"</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="fu">STATcubeR</span><span class="fu">::</span><span class="fu"><a href="../reference/sc_last_error.html">sc_last_error_parsed</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu">myApp</span><span class="fu">::</span><span class="fu">show_error_prompt</span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="kw">else</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">table</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu">myApp</span><span class="fu">::</span><span class="fu">process_data</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="https://rdrr.io/r/base/try.html" class="external-link">try()</a></code> will turn errors into “error-objects” of class
<code>"try-error"</code>. A conditional is then used to perform
different actions for successfull and unsccessfull requests. If an error
occurs, the error details are fetched via
<code><a href="../reference/sc_last_error.html">sc_last_error_parsed()</a></code> and then sent to an error handler.
Otherwise, the return value from <code><a href="../reference/sc_table.html">sc_table_saved()</a></code> is
processed by the success handler.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/GregorDeCillia" class="external-link">Gregor de Cillia</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
