<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Define custom requests against the `/table` endpoint programatically by providing character vectors with ids of databases, measures and classification fields.
">
<title>Define Custom Tables • STATcubeR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Define Custom Tables">
<meta property="og:description" content="Define custom requests against the `/table` endpoint programatically by providing character vectors with ids of databases, measures and classification fields.
">
<meta property="og:image" content="https://statistikat.github.io/STATcubeR/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">STATcubeR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.5.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/">Show All Articles ...</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>STATcube REST API</h6>
    <a class="dropdown-item" href="../articles/sc_key.html">All about the API Key</a>
    <a class="dropdown-item" href="../articles/sc_table.html">Get Data via JSON Requests</a>
    <a class="dropdown-item" href="../articles/sc_schema.html">Metadata with the /schema Endpoint</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Open Goventment Data</h6>
    <a class="dropdown-item" href="../articles/od_table.html">Getting Started with OGD Data</a>
    <a class="dropdown-item" href="../articles/od_list.html">Available Datasets</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>The STATcubeR Data Class</h6>
    <a class="dropdown-item" href="../articles/sc_data.html">A Common Class for OGD and API Data</a>
    <a class="dropdown-item" href="../articles/sc_tabulate.html">Tabulation of Data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://data.statistik.gv.at" aria-label="open data portal">
    <span class="fas fa fas fa-table fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.statistik.at/datenbanken/statcube-statistische-datenbank" aria-label="STATcube">
    <span class="fas fa fas fa-cube fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/statistikat/STATcubeR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Define Custom Tables</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/statistikat/STATcubeR/blob/HEAD/vignettes/sc_table_custom.Rmd" class="external-link"><code>vignettes/sc_table_custom.Rmd</code></a></small>
      <div class="d-none name"><code>sc_table_custom.Rmd</code></div>
    </div>

    
    
<pre><code><span><span class="co">## <span style="color: #00BB00;">✔</span> Key could be verified via a test request</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> The provided key will be available for this R session</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Add <span style="color: #0000BB;">`STATCUBE_KEY_EXT = XXXX`</span> to <span style="color: #005F00;">"~/.Renviron"</span> to set the key</span></span>
<span><span class="co">##   persistently. Replace <span style="color: #0000BB;">`XXXX`</span> with your key</span></span></code></pre>
<script src="https://unpkg.com/@popperjs/core@2"></script><script src="https://unpkg.com/tippy.js@6"></script><link rel="stylesheet" href="https://unpkg.com/tippy.js@6/themes/light.css">
<script>$(document).ready(function () {
    window.setTimeout("tippy('.STATcubeR', {allowHTML: true, theme:'light rounded'});", 50);
    });
    </script><p>The function <code><a href="../reference/sc_table_custom.html">sc_table_custom()</a></code> allows you to define
requests against the <code>/table</code> endpoint programatically. This
can be useful to automate the generation of <code>/table</code> request
rather than relying on the GUI to do so. The function accepts the three
arguments.</p>
<ul>
<li>A database id</li>
<li>ids of measures to be imported (type <code>MEASURE</code> or
<code>STAT_FUNCTION</code>)</li>
<li>ids of fields to be imported (type <code>FIELD</code> or
<code>VALUESET</code>)</li>
</ul>
<div class="section level2">
<h2 id="starting-simple">Starting Simple<a class="anchor" aria-label="anchor" href="#starting-simple"></a>
</h2>
<p>First, we want to just send a database id to
<code><a href="../reference/sc_table_custom.html">sc_table_custom()</a></code>. We will use a <a href="https://portal.statistik.at/statistik.at/ext/statcube/openinfopage?id=detouextregsai" class="external-link">database
about accomodation</a> througout this article. This returns a table with
one single row.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">database</span> <span class="op">&lt;-</span> <span class="st">"str:database:detouextregsai"</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table_custom.html">sc_table_custom</a></span><span class="op">(</span><span class="va">database</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">tabulate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A STATcubeR tibble: 1 x 2</span>
  <span style="font-weight: bold;">`Season/Tourism Month`</span> <span style="font-weight: bold;">`Nights spent`</span>
<span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>
<span style="color: #BCBCBC;">1</span> 2024-01-01                   50<span style="text-decoration: underline;">575</span>693</code></pre>
<p>we see that 50 575 693 nights were spent in austrian tourism
establishments in the month of 2024-01-01.</p>
</div>
<div class="section level2">
<h2 id="adding-countries">Adding Countries<a class="anchor" aria-label="anchor" href="#adding-countries"></a>
</h2>
<p>Now we want to add a classification to the table. This can be done by
getting the database schema and showing all classification fields.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">schema</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_schema.html">sc_schema_db</a></span><span class="op">(</span><span class="va">database</span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_schema.html">sc_schema_flatten</a></span><span class="op">(</span><span class="va">schema</span>, <span class="st">"FIELD"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A data frame: 4 × 2</span>
  <span style="font-weight: bold;">id</span>                                           <span style="font-weight: bold;">label</span>                     
  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                     
<span style="color: #BCBCBC;">1</span> str:field:detouextregsai:F-DATA1:C-SDB_TIT-0 Season/Tourism Month      
<span style="color: #BCBCBC;">2</span> str:field:detouextregsai:F-DATA:C-GEMREG-0   Tourism commune [ABO]     
<span style="color: #BCBCBC;">3</span> str:field:detouextregsai:F-DATA:C-BBTR_REG-0 Accomodation establishment
<span style="color: #BCBCBC;">4</span> str:field:detouextregsai:F-DATA1:C-C93-2     Country of origin         </code></pre>
<p>If we want to add “Country of origin” we need to include the fouth
entry of the <code>id</code> column in our request.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table_custom.html">sc_table_custom</a></span><span class="op">(</span><span class="va">database</span>, dimensions <span class="op">=</span> <span class="va">fields</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">tabulate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A STATcubeR tibble: 3 x 3</span>
  <span style="font-weight: bold;">`Season/Tourism Month`</span> <span style="font-weight: bold;">`Country of origin`</span> <span style="font-weight: bold;">`Nights spent`</span>
<span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>
<span style="color: #BCBCBC;">1</span> 2024-01-01             Austria                   11<span style="text-decoration: underline;">010</span>356
<span style="color: #BCBCBC;">2</span> 2024-01-01             Germany                   18<span style="text-decoration: underline;">406</span>575
<span style="color: #BCBCBC;">3</span> 2024-01-01             other countries           21<span style="text-decoration: underline;">158</span>762</code></pre>
</div>
<div class="section level2">
<h2 id="adding-tourism-communes">Adding Tourism Communes<a class="anchor" aria-label="anchor" href="#adding-tourism-communes"></a>
</h2>
<p>The <code>dimensions</code> parameter in
<code>sc_schema_custom()</code> accepts vectors of field ids. Therefore,
we can add the communes easily.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table_custom.html">sc_table_custom</a></span><span class="op">(</span><span class="va">database</span>, dimensions <span class="op">=</span> <span class="va">fields</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">tabulate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A STATcubeR tibble: 321 x 4</span>
   <span style="font-weight: bold;">`Season/Tourism Month`</span> <span style="font-weight: bold;">`Tourism commune [ABO]`</span>         <span style="font-weight: bold;">`Country of origin`</span>
 <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                           <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>              
<span style="color: #BCBCBC;"> 1</span> 2024-01-01             Achensee                        Austria            
<span style="color: #BCBCBC;"> 2</span> 2024-01-01             Achensee                        Germany            
<span style="color: #BCBCBC;"> 3</span> 2024-01-01             Achensee                        other countries    
<span style="color: #BCBCBC;"> 4</span> 2024-01-01             Alpbachtal und Tiroler Seenland Austria            
<span style="color: #BCBCBC;"> 5</span> 2024-01-01             Alpbachtal und Tiroler Seenland Germany            
<span style="color: #BCBCBC;"> 6</span> 2024-01-01             Alpbachtal und Tiroler Seenland other countries    
<span style="color: #BCBCBC;"> 7</span> 2024-01-01             Alpenregion Bludenz             Austria            
<span style="color: #BCBCBC;"> 8</span> 2024-01-01             Alpenregion Bludenz             Germany            
<span style="color: #BCBCBC;"> 9</span> 2024-01-01             Alpenregion Bludenz             other countries    
<span style="color: #BCBCBC;">10</span> 2024-01-01             Arlberg                         Austria            
<span style="color: #949494;"># ℹ 311 more rows</span>
<span style="color: #949494;"># ℹ 1 more variable: </span><span style="color: #949494; font-weight: bold;">`Nights spent`</span><span style="color: #949494;"> &lt;dbl&gt;</span></code></pre>
</div>
<div class="section level2">
<h2 id="add-another-measure">Add Another Measure<a class="anchor" aria-label="anchor" href="#add-another-measure"></a>
</h2>
<p>Currently, the table only returns the default measure for the
database which is the number of nights spent. We can add a second
measure by again using the database schema and passing a measure id</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">measures</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_schema.html">sc_schema_flatten</a></span><span class="op">(</span><span class="va">schema</span>, <span class="st">"MEASURE"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A data frame: 2 × 2</span>
  <span style="font-weight: bold;">id</span>                                       <span style="font-weight: bold;">label</span>       
  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       
<span style="color: #BCBCBC;">1</span> str:measure:detouextregsai:F-DATA1:F-ANK Arrivals    
<span style="color: #BCBCBC;">2</span> str:measure:detouextregsai:F-DATA1:F-UEB Nights spent</code></pre>
<p>We can add both measures to the request by using
<code>measures$id</code>. Just like the <code>dimensions</code>
parameter, the <code>measures</code> parameters accepts vectors of
resource ids.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table_custom.html">sc_table_custom</a></span><span class="op">(</span><span class="va">database</span>, measures <span class="op">=</span> <span class="va">measures</span><span class="op">$</span><span class="va">id</span>,</span>
<span>                     dimensions <span class="op">=</span> <span class="va">fields</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">tabulate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A STATcubeR tibble: 321 x 5</span>
   <span style="font-weight: bold;">`Season/Tourism Month`</span> <span style="font-weight: bold;">`Tourism commune [ABO]`</span>         <span style="font-weight: bold;">`Country of origin`</span>
 <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                           <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>              
<span style="color: #BCBCBC;"> 1</span> 2024-01-01             Achensee                        Austria            
<span style="color: #BCBCBC;"> 2</span> 2024-01-01             Achensee                        Germany            
<span style="color: #BCBCBC;"> 3</span> 2024-01-01             Achensee                        other countries    
<span style="color: #BCBCBC;"> 4</span> 2024-01-01             Alpbachtal und Tiroler Seenland Austria            
<span style="color: #BCBCBC;"> 5</span> 2024-01-01             Alpbachtal und Tiroler Seenland Germany            
<span style="color: #BCBCBC;"> 6</span> 2024-01-01             Alpbachtal und Tiroler Seenland other countries    
<span style="color: #BCBCBC;"> 7</span> 2024-01-01             Alpenregion Bludenz             Austria            
<span style="color: #BCBCBC;"> 8</span> 2024-01-01             Alpenregion Bludenz             Germany            
<span style="color: #BCBCBC;"> 9</span> 2024-01-01             Alpenregion Bludenz             other countries    
<span style="color: #BCBCBC;">10</span> 2024-01-01             Arlberg                         Austria            
<span style="color: #949494;"># ℹ 311 more rows</span>
<span style="color: #949494;"># ℹ 2 more variables: </span><span style="color: #949494; font-weight: bold;">Arrivals</span><span style="color: #949494;"> &lt;dbl&gt;, </span><span style="color: #949494; font-weight: bold;">`Nights spent`</span><span style="color: #949494;"> &lt;dbl&gt;</span></code></pre>
</div>
<div class="section level2">
<h2 id="using-valuesets">Using Valuesets<a class="anchor" aria-label="anchor" href="#using-valuesets"></a>
</h2>
<p>We can see in <a href="https://portal.statistik.at/statistik.at/ext/statcube/openinfopage?id=detouextregsai" class="external-link">the
GUI</a> that “Country of origin” is a hierarchical classification. If we
look at the table above, only the top level of the hierarchy (Austria,
Germany, other) is used. This can be changed by providing the the
valueset that corresponds to the more granular classification of
“country of origin”</p>
<p><img src="img/hierarchical_classification.png" width="50%" style="display: block; margin: auto;"></p>
<p>The different valuesets for “country of origin” can be compared by
browsing the database schema.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">valuesets</span> <span class="op">&lt;-</span> <span class="va">schema</span><span class="op">$</span><span class="va">`Other Classifications`</span><span class="op">$</span><span class="va">`Country of origin`</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>FIELD: Country of origin
<span style="color: #949494;"># A data frame: 2 × 3</span>
  <span style="font-weight: bold;">child</span>                    <span style="font-weight: bold;">type</span>     <span style="font-weight: bold;">n_childs</span>
  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>
<span style="color: #BCBCBC;">1</span> Country of origin        VALUESET       87
<span style="color: #BCBCBC;">2</span> Herkunftsland (Ebene +1) VALUESET        3</code></pre>
<p>We can see that the two levels of the hierarchy are represented by
the two valuesets. The valueset “Herkunftsland” uses 3 classification
elements and represents the top level of the hierarchy (Austria,
Germany, Other). The valueset “Country of origin” uses 87 (10+8+69)
classification elements and is the bottom level of the hierarchy. For
classification with more levels of hierarchies, more valuesets will be
present.</p>
<p>We will now use the id for the first valueset in the
<code>dimensions</code> parmaeter of <code>sc_table_custom</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table_custom.html">sc_table_custom</a></span><span class="op">(</span></span>
<span>  db <span class="op">=</span> <span class="st">"str:database:detouextregsai"</span>,</span>
<span>  measures <span class="op">=</span> <span class="va">measures</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>  dimensions <span class="op">=</span> <span class="va">valuesets</span><span class="op">$</span><span class="va">`Country of origin`</span><span class="op">$</span><span class="va">id</span></span>
<span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">tabulate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A STATcubeR tibble: 87 x 4</span>
   <span style="font-weight: bold;">`Season/Tourism Month`</span> <span style="font-weight: bold;">`Country of origin`</span>            <span style="font-weight: bold;">Arrivals</span> <span style="font-weight: bold;">`Nights spent`</span>
 <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>
<span style="color: #BCBCBC;"> 1</span> 2024-01-01             Vienna &lt;01&gt;                      <span style="text-decoration: underline;">780</span>407        2<span style="text-decoration: underline;">394</span>542
<span style="color: #BCBCBC;"> 2</span> 2024-01-01             Burgenland (beg.05/03) &lt;70&gt;      <span style="text-decoration: underline;">215</span>736         <span style="text-decoration: underline;">610</span>071
<span style="color: #BCBCBC;"> 3</span> 2024-01-01             Carinthia (beg.05/03) &lt;71&gt;       <span style="text-decoration: underline;">262</span>777         <span style="text-decoration: underline;">718</span>801
<span style="color: #BCBCBC;"> 4</span> 2024-01-01             Lower Austria (beg.05/03) &lt;72&gt;   <span style="text-decoration: underline;">750</span>052        2<span style="text-decoration: underline;">385</span>062
<span style="color: #BCBCBC;"> 5</span> 2024-01-01             Upper Austria (beg.05/03) &lt;73&gt;   <span style="text-decoration: underline;">657</span>664        1<span style="text-decoration: underline;">763</span>812
<span style="color: #BCBCBC;"> 6</span> 2024-01-01             Salzburg (beg.05/03) &lt;74&gt;        <span style="text-decoration: underline;">261</span>350         <span style="text-decoration: underline;">639</span>952
<span style="color: #BCBCBC;"> 7</span> 2024-01-01             Styria (beg.05/03) &lt;75&gt;          <span style="text-decoration: underline;">549</span>336        1<span style="text-decoration: underline;">520</span>610
<span style="color: #BCBCBC;"> 8</span> 2024-01-01             Tyrol (beg.05/03) &lt;76&gt;           <span style="text-decoration: underline;">251</span>724         <span style="text-decoration: underline;">607</span>251
<span style="color: #BCBCBC;"> 9</span> 2024-01-01             Vorarlberg (beg.05/03) &lt;77&gt;      <span style="text-decoration: underline;">142</span>066         <span style="text-decoration: underline;">370</span>255
<span style="color: #BCBCBC;">10</span> 2024-01-01             Austria except Vienna (till 0…       <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span>
<span style="color: #949494;"># ℹ 77 more rows</span></code></pre>
<p>It is possible to use a mixture of valuesets and fields in the
<code>dimensions</code> parameter.</p>
</div>
<div class="section level2">
<h2 id="filtering-data">Filtering Data<a class="anchor" aria-label="anchor" href="#filtering-data"></a>
</h2>
<p>Omitting certain classification elements from the query is possible
with the <code>recodes</code> parameter of the <code>/table</code>
endpoint. Currently, <code><a href="../reference/sc_table_custom.html">sc_table_custom()</a></code> does not provide
support for recodes. Please issue a <a href="https://github.com/statistikat/STATcubeR/issues" class="external-link">feature
request</a> if you see this as a useful extension of
<a href="../index.html" data-tippy-content="
  &lt;b class='tippy_header'&gt;R package for all things STATcube&lt;/b&gt;&lt;br/&gt;
  &lt;div class='tippy_body'&gt;
    Transfer data from the STATcube REST API or from the Open Data portal into your R sessions
  &lt;/div&gt;
  " class="STATcubeR">STATcubeR</a>.</p>
<details><summary>
Example
</summary><p>For example, the last call to <code><a href="../reference/sc_table_custom.html">sc_table_custom()</a></code> will
send the following json to the server.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>  <span class="dt">"database"</span><span class="fu">:</span> <span class="st">"str:database:detouextregsai"</span><span class="fu">,</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>  <span class="dt">"measures"</span><span class="fu">:</span> <span class="ot">[</span> <span class="st">"str:measure:detouextregsai:F-DATA1:F-ANK"</span><span class="ot">,</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>    <span class="st">"str:measure:detouextregsai:F-DATA1:F-UEB"</span> <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>  <span class="dt">"dimensions"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>    <span class="ot">[</span> <span class="st">"str:valueset:detouextregsai:F-DATA1:C-C93-2:C-C93-2"</span> <span class="ot">]</span> <span class="ot">]</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>For comparison, this is how the same request was specified in
<a href="../index.html" data-tippy-content="
  &lt;b class='tippy_header'&gt;R package for all things STATcube&lt;/b&gt;&lt;br/&gt;
  &lt;div class='tippy_body'&gt;
    Transfer data from the STATcube REST API or from the Open Data portal into your R sessions
  &lt;/div&gt;
  " class="STATcubeR">STATcubeR</a></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sc_table_custom.html">sc_table_custom</a></span><span class="op">(</span></span>
<span>  <span class="st">"str:database:detouextregsai"</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"str:measure:detouextregsai:F-DATA1:F-ANK"</span>,</span>
<span>    <span class="st">"str:measure:detouextregsai:F-DATA1:F-UEB"</span><span class="op">)</span>,</span>
<span>  <span class="st">"str:valueset:detouextregsai:F-DATA1:C-C93-2:C-C93-2"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>It is now possible to add recodes in order to only show results for
Vienna. For this, the regional classification (<code>C-C93</code>) is
limited to the code for vienna, which is <code>C-C93-2:01</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>  <span class="dt">"database"</span><span class="fu">:</span> <span class="st">"str:database:detouextregsai"</span><span class="fu">,</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>  <span class="dt">"measures"</span><span class="fu">:</span> <span class="ot">[</span> <span class="st">"str:measure:detouextregsai:F-DATA1:F-ANK"</span><span class="ot">,</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>    <span class="st">"str:measure:detouextregsai:F-DATA1:F-UEB"</span> <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>  <span class="dt">"dimensions"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>    <span class="ot">[</span> <span class="st">"str:valueset:detouextregsai:F-DATA1:C-C93-2:C-C93-2"</span> <span class="ot">]</span> <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>  <span class="dt">"recodes"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>    <span class="st">"str:valueset:detouextregsai:F-DATA1:C-C93-2:C-C93-2"</span><span class="er">:</span> <span class="fu">{</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>      <span class="dt">"map"</span><span class="fu">:</span> <span class="ot">[[</span> <span class="st">"str:value:detouextregsai:F-DATA1:C-C93-2:C-C93-2:01"</span> <span class="ot">]]</span> </span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</details>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/GregorDeCillia" class="external-link">Gregor de Cillia</a>, <a href="https://github.com/alexkowa" class="external-link">Alexander Kowarik</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
