<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Define custom requests against the `/table` endpoint programatically by providing character vectors with ids of databases, measures and classification fields.
">
<title>Define Custom Tables • STATcubeR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Define Custom Tables">
<meta property="og:description" content="Define custom requests against the `/table` endpoint programatically by providing character vectors with ids of databases, measures and classification fields.
">
<meta property="og:image" content="https://statistikat.github.io/STATcubeR/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">STATcubeR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.4.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/">Show All Articles ...</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>STATcube REST API</h6>
    <a class="dropdown-item" href="../articles/sc_key.html">All about the API Key</a>
    <a class="dropdown-item" href="../articles/sc_table.html">Get Data via JSON Requests</a>
    <a class="dropdown-item" href="../articles/sc_schema.html">Metadata with the /schema Endpoint</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Open Goventment Data</h6>
    <a class="dropdown-item" href="../articles/od_table.html">Getting Started with OGD Data</a>
    <a class="dropdown-item" href="../articles/od_list.html">Available Datasets</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>The STATcubeR Data Class</h6>
    <a class="dropdown-item" href="../articles/sc_data.html">A Common Class for OGD and API Data</a>
    <a class="dropdown-item" href="../articles/sc_tabulate.html">Tabulation of Data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://data.statistik.gv.at" aria-label="open data portal">
    <span class="fas fa fas fa-table fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.statistik.at/web_de/services/statcube/" aria-label="STATcube">
    <span class="fas fa fas fa-cube fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/statistikat/STATcubeR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Define Custom Tables</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/statistikat/STATcubeR/blob/HEAD/vignettes/sc_table_custom.Rmd" class="external-link"><code>vignettes/sc_table_custom.Rmd</code></a></small>
      <div class="d-none name"><code>sc_table_custom.Rmd</code></div>
    </div>

    
    
<script src="https://unpkg.com/@popperjs/core@2"></script><script src="https://unpkg.com/tippy.js@6"></script><link rel="stylesheet" href="https://unpkg.com/tippy.js@6/themes/light.css">
<script>$(document).ready(function () {
    window.setTimeout("tippy('.STATcubeR', {allowHTML: true, theme:'light rounded'});", 50);
    });
    </script><p>The function <code><a href="../reference/sc_table.html">sc_table_custom()</a></code> allows you to define
requests against the <code>/table</code> endpoint programatically. This
can be useful to automate the generation of <code>/table</code> request
rather than relying on the GUI to do so. The function accepts the three
arguments.</p>
<ul>
<li>A database id</li>
<li>ids of measures to be imported (type <code>MEASURE</code> or
<code>STAT_FUNCTION</code>)</li>
<li>ids of fields to be imported (type <code>FIELD</code> or
<code>VALUESET</code>)</li>
</ul>
<div class="section level2">
<h2 id="starting-simple">Starting Simple<a class="anchor" aria-label="anchor" href="#starting-simple"></a>
</h2>
<p>First, we want to just send a database id to
<code><a href="../reference/sc_table.html">sc_table_custom()</a></code>. We will use a <a href="http://sdbext:8081/statistik.at/ext/statcube/?openinfopage?id=detouextregsai" class="external-link">database
about accomodation</a> througout this article. This returns a table with
one single row.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">database</span> <span class="op">&lt;-</span> <span class="st">"str:database:detouextregsai"</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table.html">sc_table_custom</a></span><span class="op">(</span><span class="va">database</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">tabulate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A STATcubeR tibble: 1 x 2</span>
  <span style="font-weight: bold;">`Season/Tourism Month`</span> <span style="font-weight: bold;">`Nights spent`</span>
<span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>
<span style="color: #BCBCBC;">1</span> 2022-06-01                   37<span style="text-decoration: underline;">162</span>704</code></pre>
<p>we see that 37 162 704 nights were spent in austrian tourism
establishments in the month of 2022-06-01.</p>
</div>
<div class="section level2">
<h2 id="adding-countries">Adding Countries<a class="anchor" aria-label="anchor" href="#adding-countries"></a>
</h2>
<p>Now we want to add a classification to the table. This can be done by
getting the database schema and showing all classification fields.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_schema.html">sc_schema_db</a></span><span class="op">(</span><span class="va">database</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/sc_schema.html">sc_schema_flatten</a></span><span class="op">(</span><span class="st">"FIELD"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A data frame: 4 × 2</span>
  <span style="font-weight: bold;">id</span>                                           <span style="font-weight: bold;">label</span>                     
  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                     
<span style="color: #BCBCBC;">1</span> str:field:detouextregsai:F-DATA1:C-SDB_TIT-0 Season/Tourism Month      
<span style="color: #BCBCBC;">2</span> str:field:detouextregsai:F-DATA:C-GEMREG-0   Tourism commune [ABO]     
<span style="color: #BCBCBC;">3</span> str:field:detouextregsai:F-DATA:C-BBTR_REG-0 Accomodation establishment
<span style="color: #BCBCBC;">4</span> str:field:detouextregsai:F-DATA1:C-C93-2     Country of origin         </code></pre>
<p>If we want to add “Country of origin” we need to include the fouth
entry of the <code>id</code> column in our request.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table.html">sc_table_custom</a></span><span class="op">(</span><span class="va">database</span>, dimensions <span class="op">=</span> <span class="va">fields</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">tabulate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A STATcubeR tibble: 3 x 3</span>
  <span style="font-weight: bold;">`Season/Tourism Month`</span> <span style="font-weight: bold;">`Country of origin`</span> <span style="font-weight: bold;">`Nights spent`</span>
<span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>
<span style="color: #BCBCBC;">1</span> 2022-06-01             Austria                   12<span style="text-decoration: underline;">235</span>755
<span style="color: #BCBCBC;">2</span> 2022-06-01             Germany                   14<span style="text-decoration: underline;">343</span>746
<span style="color: #BCBCBC;">3</span> 2022-06-01             other countries           10<span style="text-decoration: underline;">583</span>203</code></pre>
</div>
<div class="section level2">
<h2 id="adding-tourism-communes">Adding Tourism Communes<a class="anchor" aria-label="anchor" href="#adding-tourism-communes"></a>
</h2>
<p>The <code>dimensions</code> parameter in
<code>sc_schema_custom()</code> accepts vectors of field ids. Therefore,
we can add the communes easily.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table.html">sc_table_custom</a></span><span class="op">(</span><span class="va">database</span>, dimensions <span class="op">=</span> <span class="va">fields</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">tabulate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A STATcubeR tibble: 321 x 4</span>
   <span style="font-weight: bold;">`Season/Tourism Month`</span> <span style="font-weight: bold;">`Tourism commune [ABO]`</span>        <span style="font-weight: bold;">Country of or…¹</span> <span style="font-weight: bold;">Night…²</span>
 <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>
<span style="color: #BCBCBC;"> 1</span> 2022-06-01             Achensee                       Austria           <span style="text-decoration: underline;">49</span>275
<span style="color: #BCBCBC;"> 2</span> 2022-06-01             Achensee                       Germany          <span style="text-decoration: underline;">371</span>475
<span style="color: #BCBCBC;"> 3</span> 2022-06-01             Achensee                       other countries  <span style="text-decoration: underline;">100</span>131
<span style="color: #BCBCBC;"> 4</span> 2022-06-01             Alpbachtal und Tiroler Seenla… Austria           <span style="text-decoration: underline;">30</span>257
<span style="color: #BCBCBC;"> 5</span> 2022-06-01             Alpbachtal und Tiroler Seenla… Germany          <span style="text-decoration: underline;">147</span>238
<span style="color: #BCBCBC;"> 6</span> 2022-06-01             Alpbachtal und Tiroler Seenla… other countries   <span style="text-decoration: underline;">78</span>072
<span style="color: #BCBCBC;"> 7</span> 2022-06-01             Alpenregion Bludenz            Austria           <span style="text-decoration: underline;">24</span>161
<span style="color: #BCBCBC;"> 8</span> 2022-06-01             Alpenregion Bludenz            Germany          <span style="text-decoration: underline;">124</span>078
<span style="color: #BCBCBC;"> 9</span> 2022-06-01             Alpenregion Bludenz            other countries   <span style="text-decoration: underline;">94</span>838
<span style="color: #BCBCBC;">10</span> 2022-06-01             Arlberg                        Austria           <span style="text-decoration: underline;">11</span>122
<span style="color: #949494;"># … with 311 more rows, and abbreviated variable names ¹​`Country of origin`,</span>
<span style="color: #949494;">#   ²​`Nights spent`</span></code></pre>
</div>
<div class="section level2">
<h2 id="add-another-measure">Add Another Measure<a class="anchor" aria-label="anchor" href="#add-another-measure"></a>
</h2>
<p>Currently, the table only returns the default measure for the
database which is the number of nights spent. We can add a second
measure by again using the database schema and passing a measure id</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">measures</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_schema.html">sc_schema_db</a></span><span class="op">(</span><span class="va">database</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/sc_schema.html">sc_schema_flatten</a></span><span class="op">(</span><span class="st">"MEASURE"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A data frame: 2 × 2</span>
  <span style="font-weight: bold;">id</span>                                       <span style="font-weight: bold;">label</span>       
  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       
<span style="color: #BCBCBC;">1</span> str:measure:detouextregsai:F-DATA1:F-ANK Arrivals    
<span style="color: #BCBCBC;">2</span> str:measure:detouextregsai:F-DATA1:F-UEB Nights spent</code></pre>
<p>We can add both measures to the request by using
<code>measures$id</code>. Just like the <code>dimensions</code>
parameter, the <code>measures</code> parameters accepts vectors of
resource ids.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table.html">sc_table_custom</a></span><span class="op">(</span><span class="va">database</span>, measures <span class="op">=</span> <span class="va">measures</span><span class="op">$</span><span class="va">id</span>, </span>
<span>                     dimensions <span class="op">=</span> <span class="va">fields</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">tabulate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A STATcubeR tibble: 321 x 5</span>
   <span style="font-weight: bold;">Season/Touri…¹</span> <span style="font-weight: bold;">`Tourism commune [ABO]`</span>        <span style="font-weight: bold;">Country of or…²</span> <span style="font-weight: bold;">Arriv…³</span> <span style="font-weight: bold;">Night…⁴</span>
 <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>
<span style="color: #BCBCBC;"> 1</span> 2022-06-01     Achensee                       Austria           <span style="text-decoration: underline;">16</span>835   <span style="text-decoration: underline;">49</span>275
<span style="color: #BCBCBC;"> 2</span> 2022-06-01     Achensee                       Germany          <span style="text-decoration: underline;">100</span>856  <span style="text-decoration: underline;">371</span>475
<span style="color: #BCBCBC;"> 3</span> 2022-06-01     Achensee                       other countries   <span style="text-decoration: underline;">27</span>409  <span style="text-decoration: underline;">100</span>131
<span style="color: #BCBCBC;"> 4</span> 2022-06-01     Alpbachtal und Tiroler Seenla… Austria           <span style="text-decoration: underline;">10</span>846   <span style="text-decoration: underline;">30</span>257
<span style="color: #BCBCBC;"> 5</span> 2022-06-01     Alpbachtal und Tiroler Seenla… Germany           <span style="text-decoration: underline;">35</span>436  <span style="text-decoration: underline;">147</span>238
<span style="color: #BCBCBC;"> 6</span> 2022-06-01     Alpbachtal und Tiroler Seenla… other countries   <span style="text-decoration: underline;">18</span>959   <span style="text-decoration: underline;">78</span>072
<span style="color: #BCBCBC;"> 7</span> 2022-06-01     Alpenregion Bludenz            Austria           <span style="text-decoration: underline;">10</span>462   <span style="text-decoration: underline;">24</span>161
<span style="color: #BCBCBC;"> 8</span> 2022-06-01     Alpenregion Bludenz            Germany           <span style="text-decoration: underline;">36</span>567  <span style="text-decoration: underline;">124</span>078
<span style="color: #BCBCBC;"> 9</span> 2022-06-01     Alpenregion Bludenz            other countries   <span style="text-decoration: underline;">24</span>898   <span style="text-decoration: underline;">94</span>838
<span style="color: #BCBCBC;">10</span> 2022-06-01     Arlberg                        Austria            <span style="text-decoration: underline;">4</span>593   <span style="text-decoration: underline;">11</span>122
<span style="color: #949494;"># … with 311 more rows, and abbreviated variable names ¹​`Season/Tourism Month`,</span>
<span style="color: #949494;">#   ²​`Country of origin`, ³​Arrivals, ⁴​`Nights spent`</span></code></pre>
</div>
<div class="section level2">
<h2 id="using-valuesets">Using Valuesets<a class="anchor" aria-label="anchor" href="#using-valuesets"></a>
</h2>
<p>We can see in <a href="http://sdbext:8081/statistik.at/ext/statcube/?openinfopage?id=detouextregsai" class="external-link">the
GUI</a> that “Country of origin” is a hierarchical classification. If we
look at the table above, only the top level of the hierarchy (Austria,
Germany, other) is used. This can be changed by providing the the
valueset that corresponds to the more granular classification of
“country of origin”</p>
<p><img src="img/hierarchical_classification.png" width="50%" style="display: block; margin: auto;"></p>
<p>The different valuesets for “country of origin” can be compared by
browsing the database schema.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db_schema</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_schema.html">sc_schema_db</a></span><span class="op">(</span><span class="va">database</span><span class="op">)</span></span>
<span><span class="va">db_schema</span><span class="op">$</span><span class="va">`Other Classifications`</span><span class="op">$</span><span class="va">`Country of origin`</span></span></code></pre></div>
<pre class="r-output"><code>FIELD: Country of origin
<span style="color: #949494;"># A data frame: 2 × 3</span>
  <span style="font-weight: bold;">child</span>                    <span style="font-weight: bold;">type</span>     <span style="font-weight: bold;">n_childs</span>
  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>
<span style="color: #BCBCBC;">1</span> Country of origin        VALUESET       87
<span style="color: #BCBCBC;">2</span> Herkunftsland (Ebene +1) VALUESET        3</code></pre>
<p>We can see that the two levels of the hierarchy are represented by
the two valuesets. The valueset “Herkunftsland” uses 3 classification
elements and represents the top level of the hierarchy (Austria,
Germany, Other). The valueset “Country of origin” uses 87 (10+8+69)
classification elements and is the bottom level of the hierarchy. For
classification with more levels of hierarchies, more valuesets will be
present.</p>
<p>We will now use the id for the first valueset in the
<code>dimensions</code> parmaeter of <code>sc_table_custom</code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">id_valueset</span> <span class="op">&lt;-</span> <span class="va">db_schema</span><span class="op">$</span><span class="va">`Other Classifications`</span><span class="op">$</span></span>
<span>  <span class="va">`Country of origin`</span><span class="op">$</span><span class="va">`Country of origin`</span><span class="op">$</span><span class="va">id</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_table.html">sc_table_custom</a></span><span class="op">(</span></span>
<span>  db <span class="op">=</span> <span class="st">"str:database:detouextregsai"</span>,</span>
<span>  measures <span class="op">=</span> <span class="va">measures</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>  dimensions <span class="op">=</span> <span class="va">id_valueset</span></span>
<span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">tabulate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code><span style="color: #949494;"># A STATcubeR tibble: 87 x 4</span>
   <span style="font-weight: bold;">`Season/Tourism Month`</span> <span style="font-weight: bold;">`Country of origin`</span>                    <span style="font-weight: bold;">Arriv…¹</span> <span style="font-weight: bold;">Night…²</span>
 <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>
<span style="color: #BCBCBC;"> 1</span> 2022-06-01             Vienna &lt;01&gt;                             <span style="text-decoration: underline;">886</span>417 2<span style="text-decoration: underline;">644</span>207
<span style="color: #BCBCBC;"> 2</span> 2022-06-01             Burgenland (beg.05/03) &lt;70&gt;             <span style="text-decoration: underline;">208</span>706  <span style="text-decoration: underline;">537</span>523
<span style="color: #BCBCBC;"> 3</span> 2022-06-01             Carinthia (beg.05/03) &lt;71&gt;              <span style="text-decoration: underline;">231</span>186  <span style="text-decoration: underline;">697</span>365
<span style="color: #BCBCBC;"> 4</span> 2022-06-01             Lower Austria (beg.05/03) &lt;72&gt;          <span style="text-decoration: underline;">827</span>314 2<span style="text-decoration: underline;">483</span>974
<span style="color: #BCBCBC;"> 5</span> 2022-06-01             Upper Austria (beg.05/03) &lt;73&gt;          <span style="text-decoration: underline;">747</span>303 1<span style="text-decoration: underline;">997</span>340
<span style="color: #BCBCBC;"> 6</span> 2022-06-01             Salzburg (beg.05/03) &lt;74&gt;               <span style="text-decoration: underline;">307</span>547  <span style="text-decoration: underline;">808</span>860
<span style="color: #BCBCBC;"> 7</span> 2022-06-01             Styria (beg.05/03) &lt;75&gt;                 <span style="text-decoration: underline;">622</span>698 1<span style="text-decoration: underline;">793</span>778
<span style="color: #BCBCBC;"> 8</span> 2022-06-01             Tyrol (beg.05/03) &lt;76&gt;                  <span style="text-decoration: underline;">314</span>377  <span style="text-decoration: underline;">828</span>831
<span style="color: #BCBCBC;"> 9</span> 2022-06-01             Vorarlberg (beg.05/03) &lt;77&gt;             <span style="text-decoration: underline;">168</span>320  <span style="text-decoration: underline;">443</span>877
<span style="color: #BCBCBC;">10</span> 2022-06-01             Austria except Vienna (till 04/03) &lt;0…      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>
<span style="color: #949494;"># … with 77 more rows, and abbreviated variable names ¹​Arrivals,</span>
<span style="color: #949494;">#   ²​`Nights spent`</span></code></pre>
<p>It is possible to use a mixture of valuesets and fields in the
<code>dimensions</code> parameter.</p>
</div>
<div class="section level2">
<h2 id="filtering-data">Filtering Data<a class="anchor" aria-label="anchor" href="#filtering-data"></a>
</h2>
<p>Omitting certain classification elements from the query is possible
with the <code>recodes</code> parameter of the <code>/table</code>
endpoint. Currently, <code><a href="../reference/sc_table.html">sc_table_custom()</a></code> does not provide
support for recodes. Please issue a <a href="https://github.com/statistikat/STATcubeR/issues" class="external-link">feature
request</a> if you see this as a useful extension of
<a href="../index.html" data-tippy-content="
  &lt;b&gt;R package for all things STATcube&lt;/b&gt;&lt;br/&gt;
  Transfer data from the STATcube REST API or from the Open Data portal into your R sessions
  " class="STATcubeR">STATcubeR</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/GregorDeCillia" class="external-link">Gregor de Cillia</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
