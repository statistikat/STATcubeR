<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Error handling for the STATcube REST API — sc_last_error • STATcubeR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Error handling for the STATcube REST API — sc_last_error"><meta name="description" content='In case API requests are unsuccessful, STATcubeR will throw errors
to summarize the httr error type and its meaning.
Requests are considered unsuccessful if one of the following applies
The response returns TRUE for httr::http_error().
The response is not of type "application/json"


In some cases it is useful to get direct access to a faulty response object.
For that purpose, it is possible to use sc_last_error() which will provide
the httr response object for the last unsuccessful request.'><meta property="og:description" content='In case API requests are unsuccessful, STATcubeR will throw errors
to summarize the httr error type and its meaning.
Requests are considered unsuccessful if one of the following applies
The response returns TRUE for httr::http_error().
The response is not of type "application/json"


In some cases it is useful to get direct access to a faulty response object.
For that purpose, it is possible to use sc_last_error() which will provide
the httr response object for the last unsuccessful request.'><meta property="og:image" content="https://statistikat.github.io/STATcubeR/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">STATcubeR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.5.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/">Show All Articles ...</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>STATcube REST API</h6></li>
    <li><a class="dropdown-item" href="../articles/sc_key.html">All about the API Key</a></li>
    <li><a class="dropdown-item" href="../articles/sc_table.html">Get Data via JSON Requests</a></li>
    <li><a class="dropdown-item" href="../articles/sc_schema.html">Metadata with the /schema Endpoint</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Open Goventment Data</h6></li>
    <li><a class="dropdown-item" href="../articles/od_table.html">Getting Started with OGD Data</a></li>
    <li><a class="dropdown-item" href="../articles/od_list.html">Available Datasets</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>The STATcubeR Data Class</h6></li>
    <li><a class="dropdown-item" href="../articles/sc_data.html">A Common Class for OGD and API Data</a></li>
    <li><a class="dropdown-item" href="../articles/sc_tabulate.html">Tabulation of Data</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://data.statistik.gv.at" aria-label="open data portal"><span class="fa fas fa-table fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.statistik.at/datenbanken/statcube-statistische-datenbank" aria-label="STATcube"><span class="fa fas fa-cube fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/statistikat/STATcubeR/" aria-label="github"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Error handling for the STATcube REST API</h1>
      <small class="dont-index">Source: <a href="https://github.com/statistikat/STATcubeR/blob/master/R/error.R" class="external-link"><code>R/error.R</code></a></small>
      <div class="d-none name"><code>sc_last_error.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>In case API requests are unsuccessful, <code>STATcubeR</code> will throw errors
to summarize the httr error type and its meaning.
Requests are considered unsuccessful if one of the following applies</p><ul><li><p>The response returns <code>TRUE</code> for <code><a href="https://httr.r-lib.org/reference/http_error.html" class="external-link">httr::http_error()</a></code>.</p></li>
<li><p>The response is not of type <code>"application/json"</code></p></li>
</ul><p>In some cases it is useful to get direct access to a faulty response object.
For that purpose, it is possible to use <code>sc_last_error()</code> which will provide
the httr response object for the last unsuccessful request.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sc_last_error</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">sc_last_error_parsed</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The return value from <code><a href="https://httr.r-lib.org/reference/GET.html" class="external-link">httr::GET()</a></code> or <code><a href="https://httr.r-lib.org/reference/POST.html" class="external-link">httr::POST()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>

<ul><li><p><code>sc_last_error_parsed()</code>: returns the last error as a list containing
the response content and the response status</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu"><a href="sc_table.html">sc_table_saved</a></span><span class="op">(</span><span class="st">"invalid_id"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error : Client error: (400) Bad Request</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   "message": "The requested TXD 'str:table:invalid_id' could not be found for the current user.",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   "errorType": "TXD_NOT_FOUND",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   "component": "str:table:invalid_id"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">Run </span><span style="color: #0000BB;">`sc_last_error()`</span><span style="color: #555555;"> or read the online documentation for more details</span></span>
<span class="r-in"><span><span class="va">last_error</span> <span class="op">&lt;-</span> <span class="fu">sc_last_error</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">httr</span><span class="fu">::</span><span class="fu"><a href="https://httr.r-lib.org/reference/content.html" class="external-link">content</a></span><span class="op">(</span><span class="va">last_error</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $message</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "The requested TXD 'str:table:invalid_id' could not be found for the current user."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $errorType</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "TXD_NOT_FOUND"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $component</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "str:table:invalid_id"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">sc_last_error_parsed</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ request:List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ method: chr "GET"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ url   : chr "https://statcubeapi.statistik.at/statistik.at/ext/statcube/rest/v1/table/saved/str:table:invalid_id"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ content:List of 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ message  : chr "The requested TXD 'str:table:invalid_id' could not be found for the current user."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ errorType: chr "TXD_NOT_FOUND"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ component: chr "str:table:invalid_id"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ status :List of 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ category: chr "Client error"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ reason  : chr "Bad Request"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ message : chr "Client error: (400) Bad Request"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/GregorDeCillia" class="external-link">Gregor de Cillia</a>, <a href="https://github.com/alexkowa" class="external-link">Alexander Kowarik</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

